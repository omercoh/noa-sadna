<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>הכנה לכיתה א' - נעה כהן מרפאה בעיסוק</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Heebo', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #ff6b6b, #ffa726);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.3rem;
            opacity: 0.9;
        }

        .logo {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            padding: 5px;
            overflow: hidden;
        }

        .main-content {
            padding: 30px;
        }

        .main-tabs {
            display: flex;
            background: #f8f9fa;
            border-radius: 12px;
            padding: 8px;
            margin-bottom: 30px;
            gap: 5px;
            flex-wrap: wrap;
        }

        .main-tab {
            flex: 1;
            min-width: 100px;
            padding: 10px 12px;
            background: transparent;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Heebo', sans-serif;
            font-size: 0.85rem;
            font-weight: 500;
            transition: all 0.3s ease;
            color: #666;
            text-align: center;
        }

        .main-tab:hover {
            background: rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .main-tab.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .welcome-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }

        .welcome-section h2 {
            font-size: 2.2rem;
            margin-bottom: 20px;
        }

        .welcome-section p {
            font-size: 1.2rem;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .feature-card {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border-right: 5px solid #ff6b6b;
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-card h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .feature-card p {
            color: #666;
            line-height: 1.5;
        }

        .activity-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border-right: 5px solid #ff6b6b;
        }

        .activity-section h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .game-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Heebo', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            transition: transform 0.2s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #667eea, #764ba2);
        }

        .btn-secondary:hover {
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .input-field {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-family: 'Heebo', sans-serif;
            font-size: 1rem;
            transition: border-color 0.3s ease;
            resize: vertical;
            min-height: 50px;
            margin: 10px 0;
        }

        .input-field:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .items-list {
            margin-top: 15px;
        }

        .item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            border-right: 4px solid #667eea;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .remove-button {
            background: #ff4757;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .summary-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
        }

        .summary-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            backdrop-filter: blur(10px);
        }

        .print-button {
            background: linear-gradient(45deg, #ff6b6b, #ffa726);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Heebo', sans-serif;
            font-size: 1.1rem;
            font-weight: 500;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .draggable-item {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            cursor: move;
            transition: transform 0.2s ease;
            user-select: none;
            font-weight: 600;
            font-size: 1.1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            min-height: 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .draggable-item:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .item-emoji {
            font-size: 2.5rem;
            margin-bottom: 5px;
        }

        .item-text {
            font-size: 1rem;
            font-weight: 500;
        }

        .drop-zone {
            min-height: 120px;
            border: 3px dashed #ddd;
            border-radius: 15px;
            padding: 20px;
            margin: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: flex-start;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .drop-zone.drag-over {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
            transform: scale(1.02);
        }

        .drop-zone h4 {
            width: 100%;
            text-align: center;
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .sequence-option {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
            font-size: 2rem;
            min-width: 60px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 5px;
        }

        .sequence-option:hover {
            transform: scale(1.1);
        }

        .sequence-option.selected {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            transform: scale(0.9);
        }

        .sequence-option.correct {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            animation: pulse 0.5s;
        }

        .sequence-option.wrong {
            background: linear-gradient(45deg, #ff4757, #ff3742);
            animation: shake 0.5s;
        }

        @media (max-width: 768px) {
            .main-tabs { flex-direction: column; }
            .main-tab { min-width: auto; }
            .header h1 { font-size: 2.2rem; }
            .main-content { padding: 20px; }
            .logo { position: relative; margin: 0 auto 20px; top: 0; left: 0; }
            .header { padding-top: 20px; }
            .features-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="100" cy="100" r="95" fill="white" stroke="#E8D5F2" stroke-width="2"/>
                    <text x="100" y="90" text-anchor="middle" font-family="Heebo, Arial, sans-serif" font-size="18" fill="#8B5A9F" font-weight="300">נעה כהן</text>
                    <text x="100" y="115" text-anchor="middle" font-family="Heebo, Arial, sans-serif" font-size="12" fill="#666" font-weight="400">מרפאה בעיסוק</text>
                </svg>
            </div>
            <h1>🌟 הכנה לכיתה א'</h1>
            <p>מסע משותף של הורים וילדים לקראת השלב המרגש</p>
        </div>

        <div class="main-content">
            <div class="main-tabs">
                <button class="main-tab active" onclick="showTab('home')">🏠 דף ראשי</button>
                <button class="main-tab" onclick="showTab('school')">🏫 בית הספר</button>
                <button class="main-tab" onclick="showTab('memory')">🧠 קשב וזיכרון</button>
                <button class="main-tab" onclick="showTab('executive')">🎯 תפקודים ניהוליים</button>
                <button class="main-tab" onclick="showTab('emotions')">💚 ויסות רגשי</button>
                <button class="main-tab" onclick="showTab('social')">🤝 מיומנויות חברתיות</button>
                <button class="main-tab" onclick="showTab('backpack')">🎒 התרמיל הרגשי</button>
            </div>

            <!-- Home Page -->
            <div id="home" class="tab-content active">
                <div class="welcome-section">
                    <h2>🌈 ברוכים הבאים להכנה לכיתה א'</h2>
                    <p>הכלי הדיגיטלי הזה נועד לשרת אתכם בצורה קלה ונגישה בכדי לפתח שיחה ולתמוך בילדים לאורך השלב המרגש של עלייה לכיתה א'.</p>
                    <p>כל לשונית מכילה פעילויות, משחקים וכלים מעשיים שיעזרו לכם ולילדכם להתכונן יחד למסע החדש והמרגש הזה.</p>
                    <p>השתמשו בכלי בקצב שלכם, תהנו מהתהליך ותזכרו - כל ילד מתפתח בקצב שלו והדרך החשובה ביותר היא לעודד ולתמוך.</p>
                </div>

                <div style="background: #f8f9fa; padding: 30px; border-radius: 15px; margin: 30px 0; border-right: 5px solid #667eea;">
                    <h3 style="color: #333; margin-bottom: 20px; font-size: 1.8rem;">💡 מדריך להורים</h3>
                    
                    <div style="background: white; padding: 25px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <h4 style="color: #667eea; margin-bottom: 15px;">🎯 איך להשתמש בכלי?</h4>
                        <p style="line-height: 1.6; color: #666; margin-bottom: 15px;">
                            המעבר לכיתה א' הוא שלב מרגש ומאתגר עבור ילדים והורים כאחד. הכלי הזה נועד לעזור לכם לנווט את התהליך בצורה חיובית ותומכת:
                        </p>
                        <ul style="color: #666; line-height: 1.6; margin-right: 20px;">
                            <li style="margin-bottom: 10px;"><strong>עברו יחד על הלשוניות</strong> - התיישבו ביחד מול המחשב ותנו לילדכם להוביל</li>
                            <li style="margin-bottom: 10px;"><strong>אל תמהרו</strong> - אפשר לעבור על לשונית אחת בכל פעם, לאורך כמה ימים</li>
                            <li style="margin-bottom: 10px;"><strong>עודדו דיון</strong> - השתמשו בפעילויות כבסיס לשיחות על רגשות וחוויות</li>
                            <li style="margin-bottom: 10px;"><strong>הדפיסו את התוצאות</strong> - התרמיל הרגשי יכול לשמש כזיכרון ואמצעי תקשורת עם המורה</li>
                        </ul>
                    </div>

                    <div style="background: white; padding: 25px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <h4 style="color: #ff6b6b; margin-bottom: 15px;">❤️ טיפים לליווי רגשי</h4>
                        <ul style="color: #666; line-height: 1.6; margin-right: 20px;">
                            <li style="margin-bottom: 10px;"><strong>אמתו רגשות</strong> - "זה בסדר להרגיש מפחד ומתרגש ביחד"</li>
                            <li style="margin-bottom: 10px;"><strong>שתפו מהחוויה שלכם</strong> - ספרו איך הרגשתם כשהייתם בני 6</li>
                            <li style="margin-bottom: 10px;"><strong>התמקדו בחיובי</strong> - חזקו את הביטחון העצמי והיכולות של הילד</li>
                            <li style="margin-bottom: 10px;"><strong>היו סבלניים</strong> - לכל ילד יש קצב התפתחות אחר</li>
                        </ul>
                    </div>

                    <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <h4 style="color: #4CAF50; margin-bottom: 15px;">🌱 יתרונות הכלי</h4>
                        <ul style="color: #666; line-height: 1.6; margin-right: 20px;">
                            <li style="margin-bottom: 10px;"><strong>הכנה הדרגתית</strong> - חשיפה למושגים ולסיטואציות של בית הספר</li>
                            <li style="margin-bottom: 10px;"><strong>פיתוח מודעות עצמית</strong> - הילד לומד להכיר את עצמו ואת הרגשות שלו</li>
                            <li style="margin-bottom: 10px;"><strong>בניית ביטחון</strong> - התרגלות למצבים חדשים בסביבה בטוחה</li>
                            <li style="margin-bottom: 10px;"><strong>חיזוק הקשר</strong> - זמן איכות משותף בין הורה לילד</li>
                            <li style="margin-bottom: 10px;"><strong>תקשורת עם המורה</strong> - התרמיל יכול לשמש לשיתוף מידע חשוב</li>
                        </ul>
                    </div>
                </div>

                <div style="text-align: center; margin: 30px 0;">
                    <h3 style="color: #333; margin-bottom: 20px; font-size: 1.8rem;">🎮 התחלו את המסע שלכם!</h3>
                    <p style="color: #666; font-size: 1.1rem; margin-bottom: 20px;">בחרו באחת מהלשוניות למעלה כדי להתחיל</p>
                    <div style="background: linear-gradient(45deg, #ff6b6b, #ffa726); color: white; padding: 20px; border-radius: 15px; display: inline-block;">
                        <div style="font-size: 3rem; margin-bottom: 10px;">🎒</div>
                        <div style="font-size: 1.2rem; font-weight: 600;">המטרה: לבנות ביחד את התרמיל הרגשי המושלם לכיתה א'!</div>
                    </div>
                </div>
            </div>

            <!-- School Tab -->
            <div id="school" class="tab-content">
                <div class="activity-section">
                    <h3>🏫 משחק סדר היום בבית הספר</h3>
                    <p>בואו נסדר יחד את סדר היום בבית הספר! גררו את הפעולות למקום הנכון:</p>
                    
                    <div class="game-container">
                        <h4>🔄 סדרו את היום בבית הספר</h4>
                        <p>מה קורה קודם ומה קורה אחר כך?</p>
                        
                        <div id="schoolDayItems" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin: 20px 0;">
                            <div class="draggable-item" draggable="true" data-order="6">
                                <div class="item-emoji">🚌</div>
                                <div class="item-text">נסיעה הביתה בהסעה</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-order="2">
                                <div class="item-emoji">🚪</div>
                                <div class="item-text">כניסה לכיתה</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-order="4">
                                <div class="item-emoji">🍎</div>
                                <div class="item-text">הפסקה ראשונה</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-order="1">
                                <div class="item-emoji">🏫</div>
                                <div class="item-text">הגעה לבית הספר</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-order="5">
                                <div class="item-emoji">📖</div>
                                <div class="item-text">שיעור שני</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-order="3">
                                <div class="item-emoji">📚</div>
                                <div class="item-text">שיעור ראשון</div>
                            </div>
                        </div>
                        
                        <div class="drop-zone" id="schoolDayOrder" style="min-height: 120px; border: 2px dashed #ddd; border-radius: 10px; padding: 20px; margin: 20px 0; display: flex; flex-wrap: wrap; gap: 10px; align-items: center; justify-content: center;">
                            <h4 style="width: 100%; text-align: center; color: #666; margin-bottom: 10px;">📝 סדרו כאן את סדר היום:</h4>
                        </div>
                        
                        <div style="text-align: center;">
                            <button class="btn btn-secondary" onclick="checkSchoolDayOrder()">✅ בדוק סדר</button>
                            <button class="btn" onclick="resetSchoolDay()">🔄 התחל מחדש</button>
                        </div>
                        
                        <div id="schoolDayResult" style="margin-top: 20px; font-size: 1.2rem; font-weight: bold; text-align: center;"></div>
                    </div>
                </div>

                <div class="activity-section">
                    <h3>🎯 משחק מיון - מה שייך לבית הספר?</h3>
                    <p>בואו נמיין יחד! גררו כל פריט למקום הנכון:</p>
                    
                    <div class="game-container">
                        <h4>🔍 מיון חכם</h4>
                        <p>חשבו טוב - האם זה שייך לבית הספר, לא שייך, או אולי כן?</p>
                        
                        <div id="sortingItems" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 15px; margin: 20px 0;">
                            <div class="draggable-item" draggable="true" data-category="yes">
                                <div class="item-emoji">📚</div>
                                <div class="item-text">ספר לימוד</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-category="no">
                                <div class="item-emoji">🛏️</div>
                                <div class="item-text">מיטה</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-category="yes">
                                <div class="item-emoji">✏️</div>
                                <div class="item-text">עיפרון</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-category="maybe">
                                <div class="item-emoji">🧸</div>
                                <div class="item-text">דובי קטן</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-category="no">
                                <div class="item-emoji">🍳</div>
                                <div class="item-text">מחבת</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-category="yes">
                                <div class="item-emoji">🎒</div>
                                <div class="item-text">תיק</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-category="maybe">
                                <div class="item-emoji">🍎</div>
                                <div class="item-text">תפוח</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-category="no">
                                <div class="item-emoji">🚗</div>
                                <div class="item-text">מכונית</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-category="yes">
                                <div class="item-emoji">📐</div>
                                <div class="item-text">סרגל</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-category="maybe">
                                <div class="item-emoji">⚽</div>
                                <div class="item-text">כדור</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-category="no">
                                <div class="item-emoji">🔧</div>
                                <div class="item-text">מברג</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-category="maybe">
                                <div class="item-emoji">🎨</div>
                                <div class="item-text">צבעים</div>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0;">
                            <div class="drop-zone" data-category="yes" style="background: #e8f5e8;">
                                <h4>✅ שייך לבית הספר</h4>
                            </div>
                            <div class="drop-zone" data-category="maybe" style="background: #fff3e0;">
                                <h4>🤔 אולי שייך</h4>
                            </div>
                            <div class="drop-zone" data-category="no" style="background: #ffebee;">
                                <h4>❌ לא שייך</h4>
                            </div>
                        </div>
                        
                        <div style="text-align: center;">
                            <button class="btn btn-secondary" onclick="checkSortingAnswers()">✅ בדוק מיון</button>
                            <button class="btn" onclick="resetSorting()">🔄 התחל מחדש</button>
                        </div>
                        
                        <div id="sortingResult" style="margin-top: 20px; font-size: 1.2rem; font-weight: bold; text-align: center;"></div>
                    </div>
                </div>

                <div class="activity-section">
                    <h3>🎈 נשימת הבלון הקסומה</h3>
                    <p>בואו נלמד יחד נשימה שתעזור לנו להרגיש רגועים!</p>
                    
                    <div class="game-container" style="text-align: center;">
                        <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            <p><strong>איך עושים נשימת בלון?</strong></p>
                            <p>1. שימו יד על הבטן</p>
                            <p>2. נשפו לאט דרך האף - הבטן מתנפחת כמו בלון 🎈</p>
                            <p>3. עצרו רגע</p>
                            <p>4. נשפו לאט דרך הפה - הבלון מתרוקן 💨</p>
                        </div>
                        
                        <div style="width: 150px; height: 150px; background: linear-gradient(45deg, #ff6b6b, #ffa726); border-radius: 50%; margin: 30px auto; display: flex; align-items: center; justify-content: center; color: white; font-size: 1rem; font-weight: 600; transition: all 4s ease; box-shadow: 0 10px 30px rgba(0,0,0,0.2);" id="schoolBalloon">
                            <span id="schoolBalloonText">נשימה רגועה 😌</span>
                        </div>
                        
                        <div>
                            <button class="btn btn-secondary" onclick="startBreathing()">🌟 התחל נשימת בלון</button>
                            <button class="btn" onclick="stopBreathing()">⏹️ עצור</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Memory Tab -->
            <div id="memory" class="tab-content">
                <div class="activity-section">
                    <h3>🧠 משחקי קשב וזיכרון</h3>
                    <p>בואו נחזק את הזיכרון והקשב שלנו במשחקים מהנים!</p>
                    
                    <div class="game-container">
                        <h4>🔍 משחק זיכרון - מה השתנה?</h4>
                        <p id="memoryInstructions">לחצו "התחל משחק" כדי להתחיל!</p>
                        
                        <div id="memoryGrid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; max-width: 300px; margin: 20px auto;">
                            <!-- Memory cards will be generated here -->
                        </div>
                        
                        <div style="text-align: center; margin-top: 20px;">
                            <button id="startMemoryBtn" class="btn btn-secondary" onclick="startMemoryGame()">🎮 התחל משחק</button>
                            <button id="hideCardsBtn" class="btn" style="display: none;" onclick="hideCards()">👁️ הסתר כרטיסים</button>
                            <button id="revealCardsBtn" class="btn btn-secondary" style="display: none;" onclick="selectMemoryAnswer()">👀 חשוף כרטיסים</button>
                            <button id="checkMemoryBtn" class="btn" style="display: none;" onclick="checkMemory()">✅ בדוק תשובה</button>
                            <button id="resetMemoryBtn" class="btn" style="display: none;" onclick="resetMemoryGame()">🔄 משחק חדש</button>
                        </div>
                        
                        <div id="memoryResult" style="margin-top: 20px; font-size: 1.2rem; font-weight: bold; text-align: center;"></div>
                        
                        <div id="memoryQuestion" style="margin-top: 20px; padding: 20px; background: #f0f8ff; border-radius: 10px; display: none;">
                            <h5>🤔 אילו פריטים החליפו מקום?</h5>
                            <div id="memoryOptions" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 15px;">
                                <!-- Options will be generated here -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="activity-section">
                    <h3>🎯 משחק ריכוז - זכור את הרצף</h3>
                    <p>בואו נראה כמה פריטים אתם יכולים לזכור ברצף!</p>
                    
                    <div class="game-container">
                        <h4>📝 זכרו את הרצף</h4>
                        <div style="background: #e3f2fd; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                            <p style="margin: 0; font-size: 0.9rem;">
                                <strong>רמות המשחק:</strong><br>
                                🌟 רמה 1-2: 2 פריטים<br>
                                🌟 רמה 3-4: 3 פריטים<br>
                                🌟 רמה 5-6: 4 פריטים<br>
                                🌟 רמה 7+: 5 פריטים
                            </p>
                        </div>
                        
                        <div id="sequenceDisplay" style="min-height: 150px; padding: 20px; background: #f8f9fa; border-radius: 10px; margin: 20px 0; display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 15px;">
                            <p style="color: #666;">לחצו על "התחל" כדי לראות את הרצף</p>
                        </div>
                        
                        <div style="text-align: center;">
                            <button class="btn btn-secondary" onclick="startSequenceGame()">🚀 התחל</button>
                            <span id="sequenceLevel" style="margin: 0 20px; font-weight: bold; font-size: 1.2rem;">רמה: 1</span>
                        </div>
                        
                        <div id="sequenceInput" style="margin-top: 20px; display: none;">
                            <p style="text-align: center; margin-bottom: 15px; font-size: 1.1rem;">בחרו את הפריטים בסדר הנכון:</p>
                            <div id="sequenceOptions" style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;">
                                <!-- Options will be generated here -->
                            </div>
                            <div style="text-align: center; margin-top: 20px;">
                                <button class="btn" onclick="checkSequence()">✅ בדוק רצף</button>
                                <button class="btn btn-secondary" onclick="resetSequence()">🔄 נסה שוב</button>
                            </div>
                        </div>
                        
                        <div id="sequenceResult" style="margin-top: 20px; font-size: 1.2rem; font-weight: bold; text-align: center;"></div>
                    </div>
                </div>
            </div>

            <!-- Executive Tab -->
            <div id="executive" class="tab-content">
                <div class="activity-section">
                    <h3>🎯 תפקודים ניהוליים</h3>
                    <p>בואו נפתח חשיבה גמישה ונלמד לפתור בעיות!</p>
                    
                    <div class="game-container">
                        <h4>🧩 סדר הפעולות - הכנת סנדוויץ'</h4>
                        <p>סדרו את השלבים בסדר הנכון:</p>
                        
                        <div id="sandwichSteps" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin: 20px 0;">
                            <div class="draggable-item" draggable="true" data-order="4" data-game="sandwich">
                                <div class="item-emoji">🥪</div>
                                <div class="item-text">סנדוויץ' מוכן!</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-order="1" data-game="sandwich">
                                <div class="item-emoji">🍞</div>
                                <div class="item-text">לוקחים פרוסה</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-order="3" data-game="sandwich">
                                <div class="item-emoji">🍞</div>
                                <div class="item-text">פרוסה שנייה</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-order="2" data-game="sandwich">
                                <div class="item-emoji">🍫</div>
                                <div class="item-text">מורחים שוקולד</div>
                            </div>
                        </div>
                        
                        <div class="drop-zone" id="sandwichOrder" data-dropzone="sandwich" style="min-height: 120px; border: 2px dashed #ddd; border-radius: 10px; padding: 20px; margin: 20px 0;">
                            <h4 style="width: 100%; text-align: center; color: #666;">📝 סדרו כאן את השלבים:</h4>
                        </div>
                        
                        <div style="text-align: center;">
                            <button class="btn btn-secondary" onclick="checkExecutiveOrder('sandwich')">✅ בדוק סדר</button>
                            <button class="btn" onclick="resetExecutiveOrder('sandwich')">🔄 התחל מחדש</button>
                        </div>
                        
                        <div id="sandwichResult" style="margin-top: 20px; font-size: 1.2rem; font-weight: bold; text-align: center;"></div>
                    </div>
                </div>

                <div class="activity-section">
                    <h3>🪴 סדר הפעולות - שתילת פרח</h3>
                    
                    <div class="game-container">
                        <h4>🌻 איך שותלים פרח?</h4>
                        <p>סדרו את השלבים מההתחלה ועד הסוף:</p>
                        
                        <div id="plantSteps" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin: 20px 0;">
                            <div class="draggable-item" draggable="true" data-order="3" data-game="plant">
                                <div class="item-emoji">🌱</div>
                                <div class="item-text">מניחים באדמה</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-order="5" data-game="plant">
                                <div class="item-emoji">🌻</div>
                                <div class="item-text">פרח יפה!</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-order="1" data-game="plant">
                                <div class="item-emoji">🪴</div>
                                <div class="item-text">לוקחים עציץ</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-order="4" data-game="plant">
                                <div class="item-emoji">💧</div>
                                <div class="item-text">משקים במים</div>
                            </div>
                            <div class="draggable-item" draggable="true" data-order="2" data-game="plant">
                                <div class="item-emoji">🌿</div>
                                <div class="item-text">מוציאים שתיל</div>
                            </div>
                        </div>
                        
                        <div class="drop-zone" id="plantOrder" data-dropzone="plant" style="min-height: 120px; border: 2px dashed #ddd; border-radius: 10px; padding: 20px; margin: 20px 0;">
                            <h4 style="width: 100%; text-align: center; color: #666;">📝 סדרו כאן את השלבים:</h4>
                        </div>
                        
                        <div style="text-align: center;">
                            <button class="btn btn-secondary" onclick="checkExecutiveOrder('plant')">✅ בדוק סדר</button>
                            <button class="btn" onclick="resetExecutiveOrder('plant')">🔄 התחל מחדש</button>
                        </div>
                        
                        <div id="plantResult" style="margin-top: 20px; font-size: 1.2rem; font-weight: bold; text-align: center;"></div>
                    </div>
                </div>

                <div class="activity-section">
                    <h3>💡 פתרון בעיות - מה אפשר לעשות?</h3>
                    <p>בואו נחשוב יחד על פתרונות יצירתיים לבעיות יומיומיות!</p>
                    
                    <div class="game-container">
                        <h4>🤔 בחרו סיטואציה ודברו על פתרונות אפשריים:</h4>
                        
                        <div id="problemSituations" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0;">
                            <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 25px; border-radius: 15px; cursor: pointer; transition: all 0.3s ease;" onclick="showProblem('rain')">
                                <div style="font-size: 3rem; text-align: center; margin-bottom: 10px;">🌧️</div>
                                <div style="text-align: center; font-weight: 600;">יורד גשם ושכחתי מטריה</div>
                            </div>
                            
                            <div style="background: linear-gradient(135deg, #ff6b6b, #ffa726); color: white; padding: 25px; border-radius: 15px; cursor: pointer; transition: all 0.3s ease;" onclick="showProblem('toy')">
                                <div style="font-size: 3rem; text-align: center; margin-bottom: 10px;">🧸</div>
                                <div style="text-align: center; font-weight: 600;">הצעצוע האהוב נקרע</div>
                            </div>
                            
                            <div style="background: linear-gradient(135deg, #4CAF50, #45a049); color: white; padding: 25px; border-radius: 15px; cursor: pointer; transition: all 0.3s ease;" onclick="showProblem('light')">
                                <div style="font-size: 3rem; text-align: center; margin-bottom: 10px;">💡</div>
                                <div style="text-align: center; font-weight: 600;">הפסקת חשמל</div>
                            </div>
                            
                            <div style="background: linear-gradient(135deg, #f06292, #ec407a); color: white; padding: 25px; border-radius: 15px; cursor: pointer; transition: all 0.3s ease;" onclick="showProblem('hungry')">
                                <div style="font-size: 3rem; text-align: center; margin-bottom: 10px;">🍎</div>
                                <div style="text-align: center; font-weight: 600;">רעב ואין אוכל מוכן</div>
                            </div>
                            
                            <div style="background: linear-gradient(135deg, #42a5f5, #2196f3); color: white; padding: 25px; border-radius: 15px; cursor: pointer; transition: all 0.3s ease;" onclick="showProblem('lost')">
                                <div style="font-size: 3rem; text-align: center; margin-bottom: 10px;">🔍</div>
                                <div style="text-align: center; font-weight: 600;">איבדתי משהו חשוב</div>
                            </div>
                            
                            <div style="background: linear-gradient(135deg, #ab47bc, #9c27b0); color: white; padding: 25px; border-radius: 15px; cursor: pointer; transition: all 0.3s ease;" onclick="showProblem('bored')">
                                <div style="font-size: 3rem; text-align: center; margin-bottom: 10px;">😴</div>
                                <div style="text-align: center; font-weight: 600;">משעמם ואין מה לעשות</div>
                            </div>
                        </div>
                        
                        <div id="problemDisplay" style="display: none; margin-top: 30px; padding: 25px; background: #f0f8ff; border-radius: 15px;">
                            <h5 id="problemTitle" style="font-size: 1.5rem; margin-bottom: 20px; text-align: center;"></h5>
                            
                            <div style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                                <p style="font-weight: 600; color: #667eea; margin-bottom: 10px;">💭 שאלות לחשוב עליהן:</p>
                                <ul id="problemQuestions" style="list-style: none; padding: 0;">
                                    <!-- Questions will be generated here -->
                                </ul>
                            </div>
                            
                            <div style="background: #e8f5e8; padding: 20px; border-radius: 10px;">
                                <p style="font-weight: 600; color: #4CAF50; margin-bottom: 10px;">💡 רעיונות לפתרונות:</p>
                                <div id="solutionIdeas" style="display: grid; gap: 10px;">
                                    <!-- Solution ideas will be shown here -->
                                </div>
                            </div>
                            
                            <div style="text-align: center; margin-top: 20px;">
                                <button class="btn" onclick="hideProblem()">🔙 בחר בעיה אחרת</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Emotions Tab -->
            <div id="emotions" class="tab-content">
                <div class="activity-section">
                    <h3>💚 ויסות רגשי</h3>
                    <p>בואו נכיר את הרגשות שלנו ונלמד איך להתמודד איתם!</p>
                    
                    <div class="game-container">
                        <h4>🌈 איך אני מרגיש היום?</h4>
                        <p>לחצו על הרגש שמתאים לכם:</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin: 20px 0;">
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent;" onclick="selectEmotion(this, 'שמח')">
                                <div style="font-size: 3rem; margin-bottom: 10px;">😊</div>
                                <div>שמח/שמחה</div>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent;" onclick="selectEmotion(this, 'עצוב')">
                                <div style="font-size: 3rem; margin-bottom: 10px;">😢</div>
                                <div>עצוב/עצובה</div>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent;" onclick="selectEmotion(this, 'מתרגש')">
                                <div style="font-size: 3rem; margin-bottom: 10px;">🤩</div>
                                <div>מתרגש/מתרגשת</div>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent;" onclick="selectEmotion(this, 'כועס')">
                                <div style="font-size: 3rem; margin-bottom: 10px;">😡</div>
                                <div>כועס/כועסת</div>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent;" onclick="selectEmotion(this, 'מפחד')">
                                <div style="font-size: 3rem; margin-bottom: 10px;">😰</div>
                                <div>מפחד/מפחדת</div>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent;" onclick="selectEmotion(this, 'מופתע')">
                                <div style="font-size: 3rem; margin-bottom: 10px;">😲</div>
                                <div>מופתע/מופתעת</div>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent;" onclick="selectEmotion(this, 'גאה')">
                                <div style="font-size: 3rem; margin-bottom: 10px;">😌</div>
                                <div>גאה בעצמי</div>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent;" onclick="selectEmotion(this, 'מבולבל')">
                                <div style="font-size: 3rem; margin-bottom: 10px;">😕</div>
                                <div>מבולבל/מבולבלת</div>
                            </div>
                        </div>
                        
                        <div id="emotionTalk" style="margin-top: 20px; padding: 20px; background: #f0f8ff; border-radius: 10px; display: none;">
                            <h5>💭 בואו נדבר על זה:</h5>
                            <p id="emotionQuestion"></p>
                            <textarea class="input-field" id="emotionResponse" placeholder="כתבו כאן את המחשבות שלכם..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="activity-section">
                    <h3>🌟 המשפט הקסום שלי</h3>
                    <p>כשאני מרגיש מוטרד או לחוץ, אני יכול להגיד לעצמי משפט מיוחד שיעזור לי להרגיש טוב יותר!</p>
                    
                    <div class="game-container">
                        <h4>💫 בחרו את המשפט שהכי מתאים לכם:</h4>
                        
                        <div style="display: grid; gap: 15px; margin: 20px 0;">
                            <div style="background: linear-gradient(135deg, #ff6b6b, #ffa726); color: white; padding: 20px; border-radius: 15px; cursor: pointer; transition: all 0.3s ease; text-align: center;" onclick="selectCalmingPhrase(this, 'אני בטוח ואני יכול')">
                                <div style="font-size: 1.8rem; margin-bottom: 10px;">💪</div>
                                <div style="font-size: 1.2rem; font-weight: 600;">"אני בטוח ואני יכול"</div>
                            </div>
                            
                            <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 20px; border-radius: 15px; cursor: pointer; transition: all 0.3s ease; text-align: center;" onclick="selectCalmingPhrase(this, 'הכל יהיה בסדר')">
                                <div style="font-size: 1.8rem; margin-bottom: 10px;">🌈</div>
                                <div style="font-size: 1.2rem; font-weight: 600;">"הכל יהיה בסדר"</div>
                            </div>
                            
                            <div style="background: linear-gradient(135deg, #4CAF50, #45a049); color: white; padding: 20px; border-radius: 15px; cursor: pointer; transition: all 0.3s ease; text-align: center;" onclick="selectCalmingPhrase(this, 'אני נושם עמוק ונרגע')">
                                <div style="font-size: 1.8rem; margin-bottom: 10px;">🌬️</div>
                                <div style="font-size: 1.2rem; font-weight: 600;">"אני נושם עמוק ונרגע"</div>
                            </div>
                            
                            <div style="background: linear-gradient(135deg, #ab47bc, #9c27b0); color: white; padding: 20px; border-radius: 15px; cursor: pointer; transition: all 0.3s ease; text-align: center;" onclick="selectCalmingPhrase(this, 'אני אהוב ומוקף בטוב')">
                                <div style="font-size: 1.8rem; margin-bottom: 10px;">❤️</div>
                                <div style="font-size: 1.2rem; font-weight: 600;">"אני אהוב ומוקף בטוב"</div>
                            </div>
                            
                            <div style="background: linear-gradient(135deg, #f06292, #ec407a); color: white; padding: 20px; border-radius: 15px; cursor: pointer; transition: all 0.3s ease; text-align: center;" onclick="selectCalmingPhrase(this, 'גם זה יעבור')">
                                <div style="font-size: 1.8rem; margin-bottom: 10px;">☀️</div>
                                <div style="font-size: 1.2rem; font-weight: 600;">"גם זה יעבור"</div>
                            </div>
                            
                            <div style="background: linear-gradient(135deg, #42a5f5, #2196f3); color: white; padding: 20px; border-radius: 15px; cursor: pointer; transition: all 0.3s ease; text-align: center;" onclick="selectCalmingPhrase(this, 'אני עושה כמיטב יכולתי')">
                                <div style="font-size: 1.8rem; margin-bottom: 10px;">⭐</div>
                                <div style="font-size: 1.2rem; font-weight: 600;">"אני עושה כמיטב יכולתי"</div>
                            </div>
                        </div>
                        
                        <div style="background: #f0f8ff; padding: 20px; border-radius: 10px; margin-top: 20px;">
                            <h5>💝 כתבו משפט משלכם:</h5>
                            <input type="text" id="customPhraseInput" class="input-field" placeholder="המשפט הקסום שלי הוא...">
                            <button class="btn" onclick="addCustomPhrase()">הוסף למשפטים שלי 🌟</button>
                        </div>
                        
                        <div id="selectedPhrases" style="margin-top: 20px; padding: 20px; background: #e8f5e8; border-radius: 10px; display: none;">
                            <h5>✨ המשפטים הקסומים שלי:</h5>
                            <div id="phrasesList"></div>
                        </div>
                    </div>
                </div>

                <div class="activity-section">
                    <h3>🎯 אסטרטגיות להרגעה</h3>
                    <p>דרכים שונות שיעזרו לכם להרגיש טוב יותר כשאתם מוטרדים:</p>
                    
                    <div class="game-container">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;">
                            <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 2.5rem; margin-bottom: 10px;">🫁</div>
                                <h5>נשימת בלון</h5>
                                <p style="font-size: 0.9rem;">נושם לאט ועמוק כמו שלמדנו</p>
                            </div>
                            
                            <div style="background: #f3e5f5; padding: 20px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 2.5rem; margin-bottom: 10px;">🤗</div>
                                <h5>חיבוק לעצמי</h5>
                                <p style="font-size: 0.9rem;">מחבק את עצמי חזק חזק</p>
                            </div>
                            
                            <div style="background: #e8f5e8; padding: 20px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 2.5rem; margin-bottom: 10px;">🧸</div>
                                <h5>חיבוק הדובי</h5>
                                <p style="font-size: 0.9rem;">מחבק את הצעצוע האהוב</p>
                            </div>
                            
                            <div style="background: #fff3e0; padding: 20px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 2.5rem; margin-bottom: 10px;">🗣️</div>
                                <h5>דיבור עם מבוגר</h5>
                                <p style="font-size: 0.9rem;">מספר למישהו איך אני מרגיש</p>
                            </div>
                            
                            <div style="background: #ffebee; padding: 20px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 2.5rem; margin-bottom: 10px;">🎨</div>
                                <h5>ציור או יצירה</h5>
                                <p style="font-size: 0.9rem;">מביע את הרגשות בציור</p>
                            </div>
                            
                            <div style="background: #e1f5fe; padding: 20px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 2.5rem; margin-bottom: 10px;">🎵</div>
                                <h5>שיר או מוזיקה</h5>
                                <p style="font-size: 0.9rem;">שומע שיר שאני אוהב</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Social Tab -->
            <div id="social" class="tab-content">
                <div class="activity-section">
                    <h3>🤝 מיומנויות חברתיות</h3>
                    <p>בואו נלמד איך להיות חברים טובים!</p>
                    
                    <div class="game-container">
                        <h4>⚖️ דרכים להגיב</h4>
                        <p>איך אפשר להגיב למצבים שונים?</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 20px 0;">
                            <div style="background: #e8f5e8; padding: 20px; border-radius: 10px;">
                                <h5>💚 אסרטיביות</h5>
                                <p>אני מבטא את הרגשות שלי בצורה ברורה ומכבדת</p>
                                <p><em>"אני מרגיש כועס כשאתה לוקח את הצעצוע שלי בלי לשאול"</em></p>
                            </div>
                            <div style="background: #ffebee; padding: 20px; border-radius: 10px;">
                                <h5>❤️ תוקפנות</h5>
                                <p>אני כועס ופוגע באחרים</p>
                                <p><em>"אתה גנב! תיתן לי את זה עכשיו!"</em></p>
                            </div>
                            <div style="background: #e3f2fd; padding: 20px; border-radius: 10px;">
                                <h5>💙 ויתור</h5>
                                <p>אני לא אומר מה אני רוצה</p>
                                <p><em>"בסדר... קח את זה..."</em></p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="activity-section">
                    <h3>🎭 סיטואציות חברתיות - מה הייתם עושים?</h3>
                    <p>בואו נתרגל יחד איך להתמודד עם מצבים שונים שקורים בכיתה ובמגרש!</p>
                    
                    <div class="game-container">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0;">
                            
                            <!-- Situation 1: Sharing toys -->
                            <div class="social-situation" style="background: white; border-radius: 15px; padding: 20px; border: 3px solid #ff6b6b; cursor: pointer; transition: all 0.3s ease;" onclick="showSocialSituation('sharing')">
                                <div style="font-size: 5rem; text-align: center; margin-bottom: 15px;">🧸</div>
                                <h5 style="color: #ff6b6b; text-align: center; font-size: 1.3rem; margin-bottom: 10px;">שיתוף צעצועים</h5>
                                <p style="text-align: center; color: #666;">"יותם משחק עם הרכבת שאני רוצה לשחק איתה..."</p>
                            </div>

                            <!-- Situation 2: Joining a group -->
                            <div class="social-situation" style="background: white; border-radius: 15px; padding: 20px; border: 3px solid #667eea; cursor: pointer; transition: all 0.3s ease;" onclick="showSocialSituation('joining')">
                                <div style="font-size: 5rem; text-align: center; margin-bottom: 15px;">👥</div>
                                <h5 style="color: #667eea; text-align: center; font-size: 1.3rem; margin-bottom: 10px;">הצטרפות לקבוצה</h5>
                                <p style="text-align: center; color: #666;">"ילדים משחקים יחד ואני רוצה להצטרף..."</p>
                            </div>

                            <!-- Situation 3: Being excluded -->
                            <div class="social-situation" style="background: white; border-radius: 15px; padding: 20px; border: 3px solid #ffa726; cursor: pointer; transition: all 0.3s ease;" onclick="showSocialSituation('excluded')">
                                <div style="font-size: 5rem; text-align: center; margin-bottom: 15px;">😔</div>
                                <h5 style="color: #ffa726; text-align: center; font-size: 1.3rem; margin-bottom: 10px;">הרגשה מחוץ לקבוצה</h5>
                                <p style="text-align: center; color: #666;">"החברים לא רוצים שאשחק איתם..."</p>
                            </div>

                            <!-- Situation 4: Conflict resolution -->
                            <div class="social-situation" style="background: white; border-radius: 15px; padding: 20px; border: 3px solid #4CAF50; cursor: pointer; transition: all 0.3s ease;" onclick="showSocialSituation('conflict')">
                                <div style="font-size: 5rem; text-align: center; margin-bottom: 15px;">😤</div>
                                <h5 style="color: #4CAF50; text-align: center; font-size: 1.3rem; margin-bottom: 10px;">ויכוח עם חבר</h5>
                                <p style="text-align: center; color: #666;">"רבתי עם החבר הכי טוב שלי..."</p>
                            </div>

                            <!-- Situation 5: Helping others -->
                            <div class="social-situation" style="background: white; border-radius: 15px; padding: 20px; border: 3px solid #ab47bc; cursor: pointer; transition: all 0.3s ease;" onclick="showSocialSituation('helping')">
                                <div style="font-size: 5rem; text-align: center; margin-bottom: 15px;">🤲</div>
                                <h5 style="color: #ab47bc; text-align: center; font-size: 1.3rem; margin-bottom: 10px;">עזרה לחבר</h5>
                                <p style="text-align: center; color: #666;">"רואה שמישהו עצוב או צריך עזרה..."</p>
                            </div>

                            <!-- Situation 6: Being teased -->
                            <div class="social-situation" style="background: white; border-radius: 15px; padding: 20px; border: 3px solid #f06292; cursor: pointer; transition: all 0.3s ease;" onclick="showSocialSituation('teasing')">
                                <div style="font-size: 5rem; text-align: center; margin-bottom: 15px;">😢</div>
                                <h5 style="color: #f06292; text-align: center; font-size: 1.3rem; margin-bottom: 10px;">התגרות או לעג</h5>
                                <p style="text-align: center; color: #666;">"מישהו צוחק עלי או אומר דברים לא נחמדים..."</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Social Situation Details -->
                <div id="socialSituationDetail" class="activity-section" style="display: none;">
                    <div class="game-container">
                        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 15px; margin-bottom: 20px; text-align: center;">
                            <div id="situationEmoji" style="font-size: 4rem; margin-bottom: 15px;"></div>
                            <h4 id="situationTitle" style="font-size: 1.8rem; margin-bottom: 15px;"></h4>
                            <p id="situationDescription" style="font-size: 1.2rem; line-height: 1.5;"></p>
                        </div>

                        <div style="background: #f0f8ff; padding: 25px; border-radius: 15px; margin-bottom: 20px;">
                            <h5 style="color: #667eea; margin-bottom: 15px; font-size: 1.3rem;">🤔 מה הייתם עושים במצב הזה?</h5>
                            <div id="situationOptions" style="display: grid; gap: 15px;">
                                <!-- Options will be generated here -->
                            </div>
                        </div>

                        <div id="socialFeedback" style="display: none; padding: 25px; border-radius: 15px; margin-bottom: 20px;">
                            <h5 style="margin-bottom: 15px;">💡 מה למדנו:</h5>
                            <div id="feedbackContent"></div>
                        </div>

                        <div style="text-align: center;">
                            <button class="btn" onclick="hideSocialSituation()">🔙 חזור לסיטואציות</button>
                            <button class="btn btn-secondary" onclick="resetSocialSituation()">🔄 נסה שוב</button>
                        </div>
                    </div>
                </div>

                <div class="activity-section">
                    <h3>🦸‍♀️ כח העל שלי</h3>
                    <p>כל אחד מאיתנו יש לו כוחות מיוחדים! בואו נגלה מה הכוח העל שלכם שיעזור לכם להשתלב בבית הספר!</p>
                    
                    <div class="game-container">
                        <h4>💫 גלו את כח העל שלכם!</h4>
                        <p>ענו על השאלות ותגלו איזה כוח מיוחד יש לכם:</p>
                        
                        <div style="background: #f0f8ff; padding: 25px; border-radius: 15px; margin-bottom: 25px;">
                            <div id="superpowerQuiz">
                                <div class="quiz-question" id="question1" style="display: block;">
                                    <h5 style="color: #667eea; margin-bottom: 20px;">🎨 מה הכי כיף לכם לעשות?</h5>
                                    <div style="display: grid; gap: 15px;">
                                        <div class="quiz-option" style="background: white; padding: 15px; border-radius: 10px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;" onclick="selectQuizAnswer(1, 'creative', this)">
                                            <strong>🎨 ליצור ולהמציא</strong> - אוהב/ת לצייר, לבנות, להמציא דברים חדשים
                                        </div>
                                        <div class="quiz-option" style="background: white; padding: 15px; border-radius: 10px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;" onclick="selectQuizAnswer(1, 'helper', this)">
                                            <strong>🤝 לעזור לאחרים</strong> - אוהב/ת לדאוג לחברים ולעזור כשמישהו צריך
                                        </div>
                                        <div class="quiz-option" style="background: white; padding: 15px; border-radius: 10px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;" onclick="selectQuizAnswer(1, 'leader', this)">
                                            <strong>👑 להוביל משחקים</strong> - אוהב/ת לארגן פעילויות ולהוביל קבוצות
                                        </div>
                                        <div class="quiz-option" style="background: white; padding: 15px; border-radius: 10px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;" onclick="selectQuizAnswer(1, 'peaceful', this)">
                                            <strong>☮️ לפתור בעיות</strong> - אוהב/ת לעזור כשיש ויכוחים ולמצוא פתרונות
                                        </div>
                                        <div class="quiz-option" style="background: white; padding: 15px; border-radius: 10px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;" onclick="selectQuizAnswer(1, 'cheerful', this)">
                                            <strong>😊 לשמח אחרים</strong> - אוהב/ת לספר בדיחות ולגרום לכולם לחייך
                                        </div>
                                    </div>
                                </div>

                                <div class="quiz-question" id="question2" style="display: none;">
                                    <h5 style="color: #667eea; margin-bottom: 20px;">🌟 איך החברים שלכם הכי אוהבים אתכם?</h5>
                                    <div style="display: grid; gap: 15px;">
                                        <div class="quiz-option" style="background: white; padding: 15px; border-radius: 10px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;" onclick="selectQuizAnswer(2, 'creative', this)">
                                            <strong>🎭 בגלל הדמיון שלי</strong> - תמיד יש לי רעיונות מגניבים למשחקים
                                        </div>
                                        <div class="quiz-option" style="background: white; padding: 15px; border-radius: 10px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;" onclick="selectQuizAnswer(2, 'helper', this)">
                                            <strong>🤗 בגלל שאני אכפתי</strong> - תמיד דואג/ת לחברים ועוזר/ת כשצריך
                                        </div>
                                        <div class="quiz-option" style="background: white; padding: 15px; border-radius: 10px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;" onclick="selectQuizAnswer(2, 'leader', this)">
                                            <strong>💪 בגלל שאני חזק/ה</strong> - תמיד מוכן/ה לקחת אחריות ולעזור לקבוצה
                                        </div>
                                        <div class="quiz-option" style="background: white; padding: 15px; border-radius: 10px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;" onclick="selectQuizAnswer(2, 'peaceful', this)">
                                            <strong>🕊️ בגלל שאני שליו/ה</strong> - תמיד יודע/ת לשמור על שקט ולפתור ריבים
                                        </div>
                                        <div class="quiz-option" style="background: white; padding: 15px; border-radius: 10px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;" onclick="selectQuizAnswer(2, 'cheerful', this)">
                                            <strong>🌈 בגלל שאני עליז/ה</strong> - תמיד יודע/ת איך להרים את מצב הרוח
                                        </div>
                                    </div>
                                </div>

                                <div class="quiz-question" id="question3" style="display: none;">
                                    <h5 style="color: #667eea; margin-bottom: 20px;">🏫 במה תרצו לעזור הכי הרבה בכיתה?</h5>
                                    <div style="display: grid; gap: 15px;">
                                        <div class="quiz-option" style="background: white; padding: 15px; border-radius: 10px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;" onclick="selectQuizAnswer(3, 'creative', this)">
                                            <strong>🎨 בפרויקטים יצירתיים</strong> - לעזור לכיתה להיות יפה ומעניינת
                                        </div>
                                        <div class="quiz-option" style="background: white; padding: 15px; border-radius: 10px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;" onclick="selectQuizAnswer(3, 'helper', this)">
                                            <strong>🤝 לעזור לילדים חדשים</strong> - לוודא שכולם מרגישים בבית
                                        </div>
                                        <div class="quiz-option" style="background: white; padding: 15px; border-radius: 10px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;" onclick="selectQuizAnswer(3, 'leader', this)">
                                            <strong>👥 לארגן את הכיתה</strong> - לעזור למורה ולוודא שהכל מסודר
                                        </div>
                                        <div class="quiz-option" style="background: white; padding: 15px; border-radius: 10px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;" onclick="selectQuizAnswer(3, 'peaceful', this)">
                                            <strong>☮️ לשמור על שלום</strong> - לעזור כשיש ויכוחים או עצב
                                        </div>
                                        <div class="quiz-option" style="background: white; padding: 15px; border-radius: 10px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;" onclick="selectQuizAnswer(3, 'cheerful', this)">
                                            <strong>🎉 לגרום לכולם להנות</strong> - לעזור שהכיתה תהיה מקום כיף
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="superpowerResult" style="display: none; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 15px; text-align: center;">
                            <div id="superpowerEmoji" style="font-size: 5rem; margin-bottom: 20px;"></div>
                            <h4 id="superpowerTitle" style="font-size: 2rem; margin-bottom: 15px;"></h4>
                            <p id="superpowerDescription" style="font-size: 1.2rem; line-height: 1.6; margin-bottom: 20px;"></p>
                            <div id="superpowerBenefits" style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px;">
                                <h5 style="margin-bottom: 10px;">איך זה יעזור לך בכיתה א':</h5>
                                <p id="superpowerSchoolBenefit" style="margin: 0;"></p>
                            </div>
                            <button class="btn" onclick="resetSuperpowerQuiz()" style="margin-top: 20px; background: rgba(255,255,255,0.2); border: 2px solid white;">🔄 עשה שוב את המבחן</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Backpack Tab -->
            <div id="backpack" class="tab-content">
                <div class="activity-section">
                    <h3>🎒 התרמיל הרגשי שלי</h3>
                    <p>עכשיו נבנה יחד את התרמיל הרגשי שלנו!</p>
                    
                    <div class="game-container">
                        <h4>❤️ איך אני מרגיש לגבי עלייה לכיתה א'?</h4>
                        <p>בחרו את הרגשות שהכי מתארים אתכם (אפשר לבחור כמה!):</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin: 20px 0;">
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent;" onclick="toggleGradeEmotion(this, 'מתרגש')">
                                <div style="font-size: 3rem; margin-bottom: 10px;">🤩</div>
                                <div>מתרגש/ת</div>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent;" onclick="toggleGradeEmotion(this, 'מפחד')">
                                <div style="font-size: 3rem; margin-bottom: 10px;">😰</div>
                                <div>קצת מפחד/ת</div>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent;" onclick="toggleGradeEmotion(this, 'שמח')">
                                <div style="font-size: 3rem; margin-bottom: 10px;">😊</div>
                                <div>שמח/ה</div>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent;" onclick="toggleGradeEmotion(this, 'דואג')">
                                <div style="font-size: 3rem; margin-bottom: 10px;">😟</div>
                                <div>דואג/ת</div>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent;" onclick="toggleGradeEmotion(this, 'סקרן')">
                                <div style="font-size: 3rem; margin-bottom: 10px;">🤔</div>
                                <div>סקרן/ה</div>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent;" onclick="toggleGradeEmotion(this, 'גאה')">
                                <div style="font-size: 3rem; margin-bottom: 10px;">😌</div>
                                <div>גאה</div>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent;" onclick="toggleGradeEmotion(this, 'עצוב')">
                                <div style="font-size: 3rem; margin-bottom: 10px;">😢</div>
                                <div>עצוב/ה</div>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent;" onclick="toggleGradeEmotion(this, 'בטוח')">
                                <div style="font-size: 3rem; margin-bottom: 10px;">💪</div>
                                <div>בטוח/ה בעצמי</div>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent;" onclick="toggleGradeEmotion(this, 'מבולבל')">
                                <div style="font-size: 3rem; margin-bottom: 10px;">😕</div>
                                <div>מבולבל/ת</div>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent;" onclick="toggleGradeEmotion(this, 'נחוש')">
                                <div style="font-size: 3rem; margin-bottom: 10px;">🔥</div>
                                <div>נחוש/ה</div>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent;" onclick="toggleGradeEmotion(this, 'לא בטוח')">
                                <div style="font-size: 3rem; margin-bottom: 10px;">🤷</div>
                                <div>לא בטוח/ה</div>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent;" onclick="toggleGradeEmotion(this, 'אופטימי')">
                                <div style="font-size: 3rem; margin-bottom: 10px;">🌟</div>
                                <div>אופטימי/ת</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px; padding: 20px; background: #f0f8ff; border-radius: 10px;">
                            <h5>🌈 הרגשות שלי לגבי כיתה א':</h5>
                            <div id="selectedGradeEmotions">בחרו רגשות מלמעלה...</div>
                            <div style="margin-top: 15px; font-size: 0.9rem; color: #666;">
                                💡 <strong>זכרו:</strong> זה בסדר גמור להרגיש כמה רגשות ביחד! רוב הילדים מרגישים מתרגשים ומפחדים בו זמנית לפני כיתה א'.
                            </div>
                        </div>
                    </div>
                </div>

                <div class="activity-section">
                    <h3>💭 מה אני חושב על כיתה א'?</h3>
                    <p style="margin-bottom: 20px; color: #666;">כתבו את המחשבות שלכם על בית הספר החדש:</p>
                    
                    <div class="game-container">
                        <div style="margin-bottom: 20px;">
                            <label style="font-weight: 600; color: #667eea; display: block; margin-bottom: 10px;">🤔 מה הכי מעניין אותי בכיתה א'?</label>
                            <textarea id="excitingThoughts" class="input-field" placeholder="למשל: ללמוד לקרוא, לפגוש חברים חדשים, לשחק במגרש..." style="min-height: 80px;"></textarea>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="font-weight: 600; color: #ff6b6b; display: block; margin-bottom: 10px;">😰 מה מדאיג אותי?</label>
                            <textarea id="worriedThoughts" class="input-field" placeholder="למשל: להיפרד מאמא, לא למצוא חברים, שיהיה קשה..." style="min-height: 80px;"></textarea>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="font-weight: 600; color: #4CAF50; display: block; margin-bottom: 10px;">🌟 מה אני הכי מצפה לו?</label>
                            <textarea id="hopefulThoughts" class="input-field" placeholder="למשל: לקבל ציונים טובים, להיות במשחק הכדורגל, לכתוב סיפורים..." style="min-height: 80px;"></textarea>
                        </div>
                        
                        <div style="text-align: center;">
                            <button class="btn btn-secondary" onclick="saveThoughts()">💾 שמור את המחשבות שלי</button>
                        </div>
                        
                        <div id="thoughtsSaved" style="margin-top: 20px; padding: 20px; background: #e8f5e8; border-radius: 10px; display: none;">
                            <h5 style="color: #4CAF50;">✅ המחשבות שלך נשמרו בתרמיל!</h5>
                            <p style="margin: 10px 0 0 0; color: #666;">עכשיו אפשר לעבור להמשיך לבנות את התרמיל הרגשי שלך.</p>
                        </div>
                    </div>
                </div>

                <div class="activity-section">
                    <h3>⭐ במה אני טוב?</h3>
                    <p style="margin-bottom: 20px; color: #666;">חשבו יחד על הדברים שאתם טובים בהם.</p>
                    <div style="margin-bottom: 15px;">
                        <input type="text" id="strengthInput" class="input-field" placeholder="למשל: אני טוב בציור, אני עוזר לאחרים...">
                        <button class="btn" onclick="addStrength()">הוסף לתרמיל 🎒</button>
                    </div>
                    <div id="strengthsList" class="items-list"></div>
                </div>

                <div class="activity-section">
                    <h3>🎯 מה מאתגר אותי?</h3>
                    <p style="margin-bottom: 20px; color: #666;">זה בסדר שישנם דברים שמאתגרים אותנו!</p>
                    <div style="margin-bottom: 15px;">
                        <input type="text" id="challengeInput" class="input-field" placeholder="למשל: קשה לי להיפרד מאמא...">
                        <button class="btn" onclick="addChallenge()">הוסף לתרמיל 🎒</button>
                    </div>
                    <div id="challengesList" class="items-list"></div>
                </div>

                <div class="activity-section">
                    <h3>🤝 מה יכול לעזור לי?</h3>
                    <p style="margin-bottom: 20px; color: #666;">כשמשהו קשה לנו, חשוב לדעת למי ולמה אנחנו יכולים לפנות לעזרה.</p>
                    <div style="margin-bottom: 15px;">
                        <input type="text" id="helpInput" class="input-field" placeholder="למשל: לחבק את הדובי שלי, לדבר עם המורה...">
                        <button class="btn" onclick="addHelp()">הוסף לתרמיל 🎒</button>
                    </div>
                    <div id="helpsList" class="items-list"></div>
                </div>

                <div class="summary-section">
                    <h3>🎒 התרמיל הרגשי שלי מוכן!</h3>
                    <p style="margin-bottom: 20px;">הנה כל מה שלמדתם על עצמכם והכנתם לכיתה א':</p>
                    
                    <div class="summary-item">
                        <h4>❤️ הרגשות שלי על כיתה א':</h4>
                        <div id="summaryGradeEmotions">טרם נבחרו רגשות</div>
                    </div>
                    
                    <div class="summary-item">
                        <h4>💭 המחשבות שלי:</h4>
                        <div id="summaryThoughts">טרם נשמרו מחשבות</div>
                    </div>
                    
                    <div class="summary-item">
                        <h4>⭐ החוזקות שלי:</h4>
                        <div id="summaryStrengths">טרם נוספו חוזקות</div>
                    </div>
                    
                    <div class="summary-item">
                        <h4>🎯 האתגרים שלי:</h4>
                        <div id="summaryChallenges">טרם נוספו אתגרים</div>
                    </div>
                    
                    <div class="summary-item">
                        <h4>🤝 מה שעוזר לי:</h4>
                        <div id="summaryHelp">טרם נוספו כלי עזרה</div>
                    </div>
                    
                    <div class="summary-item">
                        <h4>🎈 הכלי הסודי שלי:</h4>
                        <div>נשימת הבלון הקסומה - תמיד איתי!</div>
                    </div>
                    
                    <button class="print-button" onclick="printBackpack()">הדפס את התרמיל שלי 🖨️</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let strengths = [];
        let challenges = [];
        let helpItems = [];
        let gradeEmotions = [];
        let savedThoughts = {
            exciting: '',
            worried: '',
            hopeful: ''
        };
        let breathingInterval;
        
        // Memory game variables
        let memoryItems = ['🍎', '🚗', '⚽', '🎈'];
        let originalOrder = [];
        let newOrder = [];
        let changedItems = [];
        let selectedMemoryAnswers = [];
        
        // Sequence game variables  
        let sequenceItems = ['🐶', '🐱', '🐰', '🦊', '🐻', '🐼', '🦁', '🐯'];
        let currentSequence = [];
        let playerSequence = [];
        let sequenceLevel = 1;
        let sequenceShowTime = 1500;

        // Executive functions games
        const problemScenarios = {
            rain: {
                title: '🌧️ יורד גשם ושכחתי מטריה',
                questions: [
                    '• מה אפשר לעשות כדי לא להירטב?',
                    '• איפה אפשר לחכות עד שהגשם ייפסק?',
                    '• מי יכול לעזור לנו?'
                ],
                ideas: [
                    'לרוץ מהר מתחת לגגות',
                    'לבקש מטריה ממישהו',
                    'להתקשר להורים',
                    'לחכות שהגשם ייפסק',
                    'להשתמש בשקית כמו כובע',
                    'ללכת עם חבר תחת המטריה שלו'
                ]
            },
            toy: {
                title: '🧸 הצעצוע האהוב נקרע',
                questions: [
                    '• איך אפשר לתקן את הצעצוע?',
                    '• מי יכול לעזור לנו לתקן?',
                    '• מה אפשר לעשות בינתיים?'
                ],
                ideas: [
                    'לבקש מאמא או אבא לתפור',
                    'להשתמש בסרט דבק',
                    'לקחת לחנות תיקונים',
                    'לחבק אותו גם כשהוא קרוע',
                    'לשחק עם צעצוע אחר בינתיים',
                    'לתת לו שם חדש - "דובי המיוחד"'
                ]
            },
            light: {
                title: '💡 הפסקת חשמל',
                questions: [
                    '• איך אפשר להאיר את הבית?',
                    '• מה אפשר לעשות בלי חשמל?',
                    '• איך לא להיפחד מהחושך?'
                ],
                ideas: [
                    'להדליק נרות או פנס',
                    'לשחק משחקי קלפים',
                    'לספר סיפורים',
                    'לשיר שירים יחד',
                    'להסתכל על הכוכבים',
                    'להתחבק עם המשפחה'
                ]
            },
            hungry: {
                title: '🍎 רעב ואין אוכל מוכן',
                questions: [
                    '• מה אפשר לאכול מהר?',
                    '• איך אפשר להכין משהו פשוט?',
                    '• מי יכול לעזור?'
                ],
                ideas: [
                    'לאכול פרי או ירק',
                    'להכין כריך פשוט',
                    'לבקש עזרה מאמא או אבא',
                    'לשתות מים כדי לחכות',
                    'לאכול יוגורט או דגני בוקר',
                    'לבשל ביצה קשה'
                ]
            },
            lost: {
                title: '🔍 איבדתי משהו חשוב',
                questions: [
                    '• איפה ראיתי את זה בפעם האחרונה?',
                    '• איך אפשר לחפש בצורה מסודרת?',
                    '• מי יכול לעזור לי לחפש?'
                ],
                ideas: [
                    'לחפש במקומות שהייתי בהם',
                    'לבקש עזרה מהמשפחה',
                    'לנקות ולסדר כדי למצוא',
                    'לחשוב איפה השתמשתי בזה',
                    'לחפש מתחת למיטה ובכיסים',
                    'לשאול אם מישהו ראה'
                ]
            },
            bored: {
                title: '😴 משעמם ואין מה לעשות',
                questions: [
                    '• איזה דברים אני אוהב לעשות?',
                    '• מה אפשר לעשות בבית?',
                    '• עם מי אפשר לשחק?'
                ],
                ideas: [
                    'לצייר או ליצור משהו',
                    'לקרוא ספר או לשמוע סיפור',
                    'לשחק עם הצעצועים',
                    'לעזור בבית',
                    'להתקשר לחבר',
                    'לצאת לטיול קצר'
                ]
            }
        };

        // Tab navigation
        function showTab(tabName) {
            // Hide all tabs
            const allTabs = document.querySelectorAll('.tab-content');
            allTabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active from all buttons
            const allButtons = document.querySelectorAll('.main-tab');
            allButtons.forEach(button => {
                button.classList.remove('active');
            });
            
            // Show selected tab
            const selectedTab = document.getElementById(tabName);
            if (selectedTab) {
                selectedTab.classList.add('active');
            }
            
            // Find and activate the clicked button
            allButtons.forEach(button => {
                if (button.getAttribute('onclick') && button.getAttribute('onclick').includes(`'${tabName}'`)) {
                    button.classList.add('active');
                }
            });
            
            // Update backpack if needed
            if (tabName === 'backpack') {
                updateBackpackSummary();
            }
        }

        // Breathing animation
        function startBreathing() {
            const balloon = document.getElementById('schoolBalloon');
            const balloonText = document.getElementById('schoolBalloonText');
            let isInhaling = true;
            
            stopBreathing();
            
            breathingInterval = setInterval(() => {
                if (isInhaling) {
                    balloon.style.transform = 'scale(1.3)';
                    balloon.style.background = 'linear-gradient(45deg, #667eea, #764ba2)';
                    balloonText.textContent = 'שאפו לאט דרך האף... 🌬️';
                } else {
                    balloon.style.transform = 'scale(1)';
                    balloon.style.background = 'linear-gradient(45deg, #ff6b6b, #ffa726)';
                    balloonText.textContent = 'נשפו לאט דרך הפה... 💨';
                }
                isInhaling = !isInhaling;
            }, 4000);
        }

        function stopBreathing() {
            if (breathingInterval) {
                clearInterval(breathingInterval);
                breathingInterval = null;
            }
            
            const balloon = document.getElementById('schoolBalloon');
            const balloonText = document.getElementById('schoolBalloonText');
            balloon.style.transform = 'scale(1)';
            balloon.style.background = 'linear-gradient(45deg, #ff6b6b, #ffa726)';
            balloonText.textContent = 'נשימה רגועה 😌';
        }

        // Memory Game Functions
        function startMemoryGame() {
            const grid = document.getElementById('memoryGrid');
            const instructions = document.getElementById('memoryInstructions');
            const startBtn = document.getElementById('startMemoryBtn');
            const hideBtn = document.getElementById('hideCardsBtn');
            
            grid.innerHTML = '';
            // Randomize the initial order
            originalOrder = [...memoryItems].sort(() => Math.random() - 0.5);
            selectedMemoryAnswers = [];
            
            // Create memory cards with randomized order
            originalOrder.forEach((item, index) => {
                const card = document.createElement('div');
                card.style.cssText = `
                    width: 100px; 
                    height: 100px; 
                    background: linear-gradient(45deg, #667eea, #764ba2); 
                    border-radius: 15px; 
                    display: flex; 
                    align-items: center; 
                    justify-content: center; 
                    font-size: 3rem; 
                    color: white; 
                    cursor: pointer; 
                    transition: all 0.3s ease;
                    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
                `;
                card.textContent = item;
                card.dataset.original = index;
                grid.appendChild(card);
            });
            
            instructions.textContent = 'זכרו את המיקום של כל פריט!';
            startBtn.style.display = 'none';
            hideBtn.style.display = 'inline-block';
        }

        function hideCards() {
            const cards = document.querySelectorAll('#memoryGrid > div');
            const instructions = document.getElementById('memoryInstructions');
            const hideBtn = document.getElementById('hideCardsBtn');
            const checkBtn = document.getElementById('checkMemoryBtn');
            const questionDiv = document.getElementById('memoryQuestion');
            const optionsDiv = document.getElementById('memoryOptions');
            
            // Hide cards
            cards.forEach(card => {
                card.style.background = '#ddd';
                card.textContent = '?';
            });
            
            // Swap two random items
            const indices = [0, 1, 2, 3];
            const swapIndex1 = Math.floor(Math.random() * 4);
            let swapIndex2 = Math.floor(Math.random() * 4);
            while (swapIndex2 === swapIndex1) {
                swapIndex2 = Math.floor(Math.random() * 4);
            }
            
            newOrder = [...originalOrder];
            [newOrder[swapIndex1], newOrder[swapIndex2]] = [newOrder[swapIndex2], newOrder[swapIndex1]];
            changedItems = [originalOrder[swapIndex1], originalOrder[swapIndex2]];
            
            // Wait 2 seconds before revealing the swapped cards
            setTimeout(() => {
                // Show back the cards with new order
                cards.forEach((card, index) => {
                    card.style.cssText = `
                        width: 100px; 
                        height: 100px; 
                        background: linear-gradient(45deg, #667eea, #764ba2); 
                        border-radius: 15px; 
                        display: flex; 
                        align-items: center; 
                        justify-content: center; 
                        font-size: 3rem; 
                        color: white; 
                        cursor: pointer; 
                        transition: all 0.3s ease;
                        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
                    `;
                    card.textContent = newOrder[index];
                    card.dataset.original = index;
                });

                // Show question
                instructions.textContent = 'איזה פריטים החליפו מקום? (בחרו את כל הפריטים שהחליפו מקום)';
                hideBtn.style.display = 'none';
                questionDiv.style.display = 'block';
                
                // Create options with all 4 items
                optionsDiv.innerHTML = '';
                memoryItems.forEach(item => {
                    const option = document.createElement('div');
                    option.style.cssText = `
                        background: white; 
                        padding: 15px; 
                        border-radius: 10px; 
                        text-align: center; 
                        cursor: pointer; 
                        transition: all 0.3s ease; 
                        border: 2px solid transparent;
                        font-size: 2rem;
                    `;
                    option.textContent = item;
                    option.onclick = () => toggleMemoryAnswer(option, item);
                    optionsDiv.appendChild(option);
                });
                
                checkBtn.style.display = 'inline-block';
            }, 2000);
        }

        function toggleMemoryAnswer(element, answer) {
            if (selectedMemoryAnswers.includes(answer)) {
                // Deselect
                selectedMemoryAnswers = selectedMemoryAnswers.filter(a => a !== answer);
                element.style.borderColor = 'transparent';
                element.style.background = 'white';
                element.style.color = '#333';
            } else {
                // Select
                selectedMemoryAnswers.push(answer);
                element.style.borderColor = '#667eea';
                element.style.background = 'linear-gradient(45deg, #667eea, #764ba2)';
                element.style.color = 'white';
            }
        }

        function checkMemory() {
            const result = document.getElementById('memoryResult');
            const resetBtn = document.getElementById('resetMemoryBtn');
            const checkBtn = document.getElementById('checkMemoryBtn');
            
            if (selectedMemoryAnswers.length === 0) {
                result.innerHTML = '📝 אנא בחרו תשובה קודם';
                result.style.color = '#ffa726';
                return;
            }
            
            // Check if selected answers match exactly the changed items
            const isCorrect = selectedMemoryAnswers.length === changedItems.length &&
                            selectedMemoryAnswers.every(item => changedItems.includes(item)) &&
                            changedItems.every(item => selectedMemoryAnswers.includes(item));
            
            if (isCorrect) {
                result.innerHTML = '🎉 מעולה! זיהיתם נכון את כל הפריטים שהחליפו מקום!';
                result.style.color = '#4CAF50';
            } else {
                const correctItems = changedItems.join(' ו-');
                result.innerHTML = `😅 לא בדיוק... הפריטים שהחליפו מקום היו: ${correctItems}`;
                result.style.color = '#ff4757';
            }
            
            checkBtn.style.display = 'none';
            resetBtn.style.display = 'inline-block';
        }

        function resetMemoryGame() {
            const grid = document.getElementById('memoryGrid');
            const instructions = document.getElementById('memoryInstructions');
            const startBtn = document.getElementById('startMemoryBtn');
            const resetBtn = document.getElementById('resetMemoryBtn');
            const revealBtn = document.getElementById('revealCardsBtn');
            const questionDiv = document.getElementById('memoryQuestion');
            const result = document.getElementById('memoryResult');
            
            grid.innerHTML = '';
            instructions.textContent = 'זכרו את המיקום של הפריטים!';
            questionDiv.style.display = 'none';
            result.innerHTML = '';
            selectedAnswer = '';
            
            startBtn.style.display = 'inline-block';
            resetBtn.style.display = 'none';
            revealBtn.style.display = 'none';
        }

        // Sequence Game Functions
        function startSequenceGame() {
            const display = document.getElementById('sequenceDisplay');
            const inputDiv = document.getElementById('sequenceInput');
            const optionsDiv = document.getElementById('sequenceOptions');
            const result = document.getElementById('sequenceResult');
            
            // Clear previous
            result.innerHTML = '';
            playerSequence = [];
            
            // Determine sequence length based on level
            let sequenceLength;
            if (sequenceLevel <= 2) sequenceLength = 2;
            else if (sequenceLevel <= 4) sequenceLength = 3;
            else if (sequenceLevel <= 6) sequenceLength = 4;
            else sequenceLength = 5;
            
            // Generate random sequence without duplicates
            currentSequence = [];
            const availableItems = [...sequenceItems];
            
            for (let i = 0; i < sequenceLength && i < availableItems.length; i++) {
                const randomIndex = Math.floor(Math.random() * availableItems.length);
                const selectedItem = availableItems[randomIndex];
                currentSequence.push(selectedItem);
                // Remove the selected item to prevent duplicates
                availableItems.splice(randomIndex, 1);
            }
            
            // Show sequence
            display.innerHTML = '';
            currentSequence.forEach((item, index) => {
                setTimeout(() => {
                    const itemDiv = document.createElement('div');
                    itemDiv.style.cssText = `
                        font-size: 4rem; 
                        padding: 10px; 
                        background: linear-gradient(45deg, #ff6b6b, #ffa726); 
                        border-radius: 15px; 
                        color: white; 
                        margin: 5px;
                        animation: pulse 0.5s;
                    `;
                    itemDiv.textContent = item;
                    display.appendChild(itemDiv);
                }, index * sequenceShowTime);
            });
            
            // Show input after sequence is complete
            setTimeout(() => {
                display.innerHTML = '<p style="color: #666;">עכשיו בחרו את הרצף בסדר הנכון:</p>';
                inputDiv.style.display = 'block';
                
                // Create shuffled options - include all items from the sequence plus some extras
                const optionItems = [...currentSequence];
                const remainingItems = sequenceItems.filter(item => !currentSequence.includes(item));
                
                // Add a few random items that weren't in the sequence (up to 3 extra)
                const extraCount = Math.min(3, remainingItems.length);
                for (let i = 0; i < extraCount; i++) {
                    const randomIndex = Math.floor(Math.random() * remainingItems.length);
                    optionItems.push(remainingItems[randomIndex]);
                    remainingItems.splice(randomIndex, 1);
                }
                
                // Shuffle all options
                const shuffledOptions = optionItems.sort(() => Math.random() - 0.5);
                
                optionsDiv.innerHTML = '';
                shuffledOptions.forEach(item => {
                    const option = document.createElement('div');
                    option.className = 'sequence-option';
                    option.textContent = item;
                    option.onclick = () => selectSequenceItem(option, item);
                    optionsDiv.appendChild(option);
                });
            }, currentSequence.length * sequenceShowTime + 1000);
        }

        function selectSequenceItem(element, item) {
            if (element.classList.contains('selected')) return;
            
            element.classList.add('selected');
            playerSequence.push(item);
            element.textContent = `${playerSequence.length}. ${item}`;
        }

        function checkSequence() {
            const result = document.getElementById('sequenceResult');
            const levelSpan = document.getElementById('sequenceLevel');
            
            if (playerSequence.length !== currentSequence.length) {
                result.innerHTML = '📝 אנא בחרו את כל הפריטים ברצף';
                result.style.color = '#ffa726';
                return;
            }
            
            const correct = playerSequence.every((item, index) => item === currentSequence[index]);
            
            if (correct) {
                sequenceLevel++;
                result.innerHTML = `🎉 מעולה! עלינו לרמה ${sequenceLevel}`;
                result.style.color = '#4CAF50';
                levelSpan.textContent = `רמה: ${sequenceLevel}`;
                
                setTimeout(() => {
                    startSequenceGame();
                }, 2000);
            } else {
                result.innerHTML = '😅 לא בדיוק... הרצף הנכון היה: ' + currentSequence.join(' ← ');
                result.style.color = '#ff4757';
            }
        }

        function resetSequence() {
            const inputDiv = document.getElementById('sequenceInput');
            const result = document.getElementById('sequenceResult');
            const display = document.getElementById('sequenceDisplay');
            
            inputDiv.style.display = 'none';
            result.innerHTML = '';
            display.innerHTML = '<p style="color: #666;">לחצו על "התחל" כדי לראות את הרצף</p>';
            playerSequence = [];
        }

        // Emotion selection
        function selectEmotion(element, emotion) {
            // Remove previous selections
            document.querySelectorAll('#emotions div[onclick*="selectEmotion"]').forEach(card => {
                card.style.borderColor = 'transparent';
                card.style.background = 'white';
                card.style.color = '#333';
            });
            
            // Select current emotion
            element.style.borderColor = '#ff6b6b';
            element.style.background = 'linear-gradient(45deg, #ff6b6b, #ffa726)';
            element.style.color = 'white';
            
            // Show discussion
            const emotionTalk = document.getElementById('emotionTalk');
            const emotionQuestion = document.getElementById('emotionQuestion');
            
            const questions = {
                'שמח': 'מה גורם לכם להרגיש שמחים? איך אפשר לחלוק את השמחה עם אחרים?',
                'עצוב': 'זה בסדר להרגיש עצובים לפעמים. מה עוזר לכם כשאתם עצובים?',
                'מתרגש': 'התרגשות זה נפלא! איך אפשר לנתב את ההתרגשות למשהו טוב?',
                'כועס': 'כעס זה רגש טבעי. איך אפשר להביע כעס בצורה בטוחה ובריאה?',
                'מפחד': 'פחד עוזר לנו להיות זהירים. מה עוזר לכם כשאתם מפחדים?',
                'מופתע': 'הפתעות יכולות להיות נעימות או לא. איך אתם מרגישים עם הפתעות?',
                'גאה': 'כיף להרגיש גאה בהישגים! במה אתם הכי גאים בעצמכם?',
                'מבולבל': 'לפעמים דברים לא ברורים, וזה בסדר. למי אפשר לפנות כשמבולבלים?'
            };
            
            emotionQuestion.textContent = questions[emotion] || 'ספרו לי עוד על הרגש הזה...';
            emotionTalk.style.display = 'block';
        }

        // Calming phrases functionality
        let selectedPhrases = [];

        function selectCalmingPhrase(element, phrase) {
            // Add visual feedback
            element.style.transform = 'scale(0.95)';
            setTimeout(() => {
                element.style.transform = 'scale(1)';
            }, 150);
            
            // Add to selected phrases if not already there
            if (!selectedPhrases.includes(phrase)) {
                selectedPhrases.push(phrase);
                updatePhrasesList();
            }
            
            // Show success message
            const temp = element.innerHTML;
            element.innerHTML = '<div style="font-size: 1.8rem;">✅</div><div style="font-size: 1.2rem; font-weight: 600;">נוסף למשפטים שלי!</div>';
            setTimeout(() => {
                element.innerHTML = temp;
            }, 1000);
        }

        function addCustomPhrase() {
            const input = document.getElementById('customPhraseInput');
            const phrase = input.value.trim();
            
            if (phrase && !selectedPhrases.includes(phrase)) {
                selectedPhrases.push(phrase);
                input.value = '';
                updatePhrasesList();
            }
        }

        function updatePhrasesList() {
            const listContainer = document.getElementById('phrasesList');
            const selectedContainer = document.getElementById('selectedPhrases');
            
            if (selectedPhrases.length > 0) {
                selectedContainer.style.display = 'block';
                listContainer.innerHTML = '';
                
                selectedPhrases.forEach((phrase, index) => {
                    const phraseDiv = document.createElement('div');
                    phraseDiv.style.cssText = `
                        background: white; 
                        padding: 15px; 
                        border-radius: 10px; 
                        margin: 10px 0; 
                        border-right: 4px solid #4CAF50; 
                        display: flex; 
                        justify-content: space-between; 
                        align-items: center;
                        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
                    `;
                    phraseDiv.innerHTML = `
                        <span style="font-weight: 500;">✨ "${phrase}"</span>
                        <button onclick="removePhrase(${index})" style="background: #ff4757; color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; font-size: 1.2rem;">×</button>
                    `;
                    listContainer.appendChild(phraseDiv);
                });
            } else {
                selectedContainer.style.display = 'none';
            }
        }

        function removePhrase(index) {
            selectedPhrases.splice(index, 1);
            updatePhrasesList();
        }

        // Grade emotions toggle
        function toggleGradeEmotion(element, emotion) {
            if (element.style.borderColor === 'rgb(255, 107, 107)') {
                // Remove selection
                element.style.borderColor = 'transparent';
                element.style.background = 'white';
                element.style.color = '#333';
                
                const index = gradeEmotions.indexOf(emotion);
                if (index > -1) {
                    gradeEmotions.splice(index, 1);
                }
            } else {
                // Add selection
                element.style.borderColor = '#ff6b6b';
                element.style.background = 'linear-gradient(45deg, #ff6b6b, #ffa726)';
                element.style.color = 'white';
                
                if (!gradeEmotions.includes(emotion)) {
                    gradeEmotions.push(emotion);
                }
            }
            
            updateGradeEmotions();
        }

        function updateGradeEmotions() {
            const display = document.getElementById('selectedGradeEmotions');
            if (gradeEmotions.length > 0) {
                display.textContent = gradeEmotions.join(', ');
            } else {
                display.textContent = 'בחרו רגשות מלמעלה...';
            }
        }

        // Backpack functions
        function addStrength() {
            const input = document.getElementById('strengthInput');
            const value = input.value.trim();
            
            if (value) {
                strengths.push(value);
                input.value = '';
                renderStrengths();
            }
        }

        function addChallenge() {
            const input = document.getElementById('challengeInput');
            const value = input.value.trim();
            
            if (value) {
                challenges.push(value);
                input.value = '';
                renderChallenges();
            }
        }

        function addHelp() {
            const input = document.getElementById('helpInput');
            const value = input.value.trim();
            
            if (value) {
                helpItems.push(value);
                input.value = '';
                renderHelp();
            }
        }

        function renderStrengths() {
            const list = document.getElementById('strengthsList');
            list.innerHTML = '';
            
            strengths.forEach((strength, index) => {
                const item = document.createElement('div');
                item.className = 'item';
                item.innerHTML = `
                    <span>⭐ ${strength}</span>
                    <button class="remove-button" onclick="removeStrength(${index})">×</button>
                `;
                list.appendChild(item);
            });
        }

        function renderChallenges() {
            const list = document.getElementById('challengesList');
            list.innerHTML = '';
            
            challenges.forEach((challenge, index) => {
                const item = document.createElement('div');
                item.className = 'item';
                item.innerHTML = `
                    <span>🎯 ${challenge}</span>
                    <button class="remove-button" onclick="removeChallenge(${index})">×</button>
                `;
                list.appendChild(item);
            });
        }

        function renderHelp() {
            const list = document.getElementById('helpsList');
            list.innerHTML = '';
            
            helpItems.forEach((help, index) => {
                const item = document.createElement('div');
                item.className = 'item';
                item.innerHTML = `
                    <span>🤝 ${help}</span>
                    <button class="remove-button" onclick="removeHelp(${index})">×</button>
                `;
                list.appendChild(item);
            });
        }

        function removeStrength(index) {
            strengths.splice(index, 1);
            renderStrengths();
        }

        function removeChallenge(index) {
            challenges.splice(index, 1);
            renderChallenges();
        }

        function removeHelp(index) {
            helpItems.splice(index, 1);
            renderHelp();
        }

        function updateBackpackSummary() {
            document.getElementById('summaryGradeEmotions').innerHTML = 
                gradeEmotions.length > 0 ? gradeEmotions.map(e => `• ${e}`).join('<br>') : 'טרם נבחרו רגשות';
            
            // Update thoughts summary
            let thoughtsHTML = '';
            if (savedThoughts.exciting) {
                thoughtsHTML += `<strong>🤔 מה מעניין אותי:</strong> ${savedThoughts.exciting}<br><br>`;
            }
            if (savedThoughts.worried) {
                thoughtsHTML += `<strong>😰 מה מדאיג אותי:</strong> ${savedThoughts.worried}<br><br>`;
            }
            if (savedThoughts.hopeful) {
                thoughtsHTML += `<strong>🌟 מה אני מצפה לו:</strong> ${savedThoughts.hopeful}<br><br>`;
            }
            
            document.getElementById('summaryThoughts').innerHTML = 
                thoughtsHTML || 'טרם נשמרו מחשבות';
            
            document.getElementById('summaryStrengths').innerHTML = 
                strengths.length > 0 ? strengths.map(s => `• ${s}`).join('<br>') : 'טרם נוספו חוזקות';
            
            document.getElementById('summaryChallenges').innerHTML = 
                challenges.length > 0 ? challenges.map(c => `• ${c}`).join('<br>') : 'טרם נוספו אתגרים';
            
            document.getElementById('summaryHelp').innerHTML = 
                helpItems.length > 0 ? helpItems.map(h => `• ${h}`).join('<br>') : 'טרם נוספו כלי עזרה';
        }

        // Save thoughts functionality
        function saveThoughts() {
            savedThoughts.exciting = document.getElementById('excitingThoughts').value.trim();
            savedThoughts.worried = document.getElementById('worriedThoughts').value.trim();
            savedThoughts.hopeful = document.getElementById('hopefulThoughts').value.trim();
            
            const savedDiv = document.getElementById('thoughtsSaved');
            if (savedThoughts.exciting || savedThoughts.worried || savedThoughts.hopeful) {
                savedDiv.style.display = 'block';
                setTimeout(() => {
                    savedDiv.scrollIntoView({ behavior: 'smooth' });
                }, 200);
            }
        }

        function printBackpack() {
            updateBackpackSummary();
            window.print();
        }

        // School day ordering game
        function checkSchoolDayOrder() {
            const orderZone = document.getElementById('schoolDayOrder');
            const items = orderZone.querySelectorAll('.draggable-item');
            const result = document.getElementById('schoolDayResult');
            
            let correctOrder = true;
            items.forEach((item, index) => {
                const expectedOrder = parseInt(item.dataset.order);
                if (expectedOrder !== index + 1) {
                    correctOrder = false;
                }
            });
            
            if (items.length === 6 && correctOrder) {
                result.innerHTML = '🎉 מעולה! סידרתם נכון את סדר היום בבית הספר!';
                result.style.color = '#4CAF50';
            } else if (items.length === 6) {
                result.innerHTML = '😅 לא בדיוק... נסו שוב! הסדר הנכון: הגעה ← כניסה ← שיעור ← הפסקה ← שיעור ← נסיעה הביתה';
                result.style.color = '#ff4757';
            } else {
                result.innerHTML = '📝 בבקשה סדרו את כל הפעולות בתיבה';
                result.style.color = '#ffa726';
            }
        }

        function resetSchoolDay() {
            const orderZone = document.getElementById('schoolDayOrder');
            const itemsContainer = document.getElementById('schoolDayItems');
            const items = orderZone.querySelectorAll('.draggable-item');
            
            items.forEach(item => {
                itemsContainer.appendChild(item);
            });
            
            const title = orderZone.querySelector('h4');
            orderZone.innerHTML = '';
            orderZone.appendChild(title);
            
            document.getElementById('schoolDayResult').innerHTML = '';
        }

        // Sorting game
        function checkSortingAnswers() {
            const zones = document.querySelectorAll('.drop-zone[data-category]');
            const result = document.getElementById('sortingResult');
            
            let totalItems = 0;
            let correctItems = 0;
            
            zones.forEach(zone => {
                const category = zone.dataset.category;
                const items = zone.querySelectorAll('.draggable-item');
                
                items.forEach(item => {
                    totalItems++;
                    if (item.dataset.category === category) {
                        correctItems++;
                        item.style.background = 'linear-gradient(45deg, #4CAF50, #45a049)';
                    } else {
                        item.style.background = 'linear-gradient(45deg, #ff4757, #ff3742)';
                    }
                });
            });
            
            setTimeout(() => {
                const percentage = Math.round((correctItems / totalItems) * 100);
                if (percentage >= 80) {
                    result.innerHTML = `🌟 מעולה! מיינתם נכון ${correctItems} מתוך ${totalItems} פריטים (${percentage}%)`;
                    result.style.color = '#4CAF50';
                } else if (percentage >= 60) {
                    result.innerHTML = `👍 טוב מאוד! מיינתם נכון ${correctItems} מתוך ${totalItems} פריטים (${percentage}%)`;
                    result.style.color = '#ffa726';
                } else {
                    result.innerHTML = `💪 בואו ננסה שוב! מיינתם נכון ${correctItems} מתוך ${totalItems} פריטים (${percentage}%)`;
                    result.style.color = '#ff4757';
                }
            }, 500);
        }

        function resetSorting() {
            const itemsContainer = document.getElementById('sortingItems');
            const zones = document.querySelectorAll('.drop-zone[data-category]');
            
            zones.forEach(zone => {
                const items = zone.querySelectorAll('.draggable-item');
                items.forEach(item => {
                    item.style.background = 'linear-gradient(45deg, #667eea, #764ba2)';
                    itemsContainer.appendChild(item);
                });
            });
            
            document.getElementById('sortingResult').innerHTML = '';
        }

        // Executive functions
        function checkExecutiveOrder(gameType) {
            const orderZone = document.getElementById(gameType + 'Order');
            const items = orderZone.querySelectorAll('.draggable-item[data-game="' + gameType + '"]');
            const result = document.getElementById(gameType + 'Result');
            
            let correctOrder = true;
            let expectedCount = gameType === 'sandwich' ? 4 : 5;
            
            items.forEach((item, index) => {
                const expectedOrder = parseInt(item.dataset.order);
                if (expectedOrder !== index + 1) {
                    correctOrder = false;
                }
            });
            
            if (items.length === expectedCount && correctOrder) {
                result.innerHTML = '🎉 מעולה! סידרתם נכון את השלבים!';
                result.style.color = '#4CAF50';
            } else if (items.length === expectedCount) {
                result.innerHTML = '😅 לא בדיוק... נסו שוב לסדר את השלבים בסדר הנכון';
                result.style.color = '#ff4757';
            } else {
                result.innerHTML = '📝 בבקשה סדרו את כל השלבים בתיבה';
                result.style.color = '#ffa726';
            }
        }

        function resetExecutiveOrder(gameType) {
            const orderZone = document.getElementById(gameType + 'Order');
            const itemsContainer = document.getElementById(gameType + 'Steps');
            const items = orderZone.querySelectorAll('.draggable-item[data-game="' + gameType + '"]');
            
            items.forEach(item => {
                itemsContainer.appendChild(item);
            });
            
            const title = orderZone.querySelector('h4');
            orderZone.innerHTML = '';
            orderZone.appendChild(title);
            
            document.getElementById(gameType + 'Result').innerHTML = '';
        }

        // Problem solving functions
        function showProblem(problemKey) {
            const scenario = problemScenarios[problemKey];
            const display = document.getElementById('problemDisplay');
            const title = document.getElementById('problemTitle');
            const questions = document.getElementById('problemQuestions');
            const ideas = document.getElementById('solutionIdeas');
            
            title.textContent = scenario.title;
            
            questions.innerHTML = '';
            scenario.questions.forEach(q => {
                const li = document.createElement('li');
                li.textContent = q;
                li.style.marginBottom = '8px';
                questions.appendChild(li);
            });
            
            ideas.innerHTML = '';
            scenario.ideas.forEach(idea => {
                const div = document.createElement('div');
                div.textContent = '• ' + idea;
                div.style.padding = '8px';
                div.style.background = 'rgba(255,255,255,0.7)';
                div.style.borderRadius = '5px';
                ideas.appendChild(div);
            });
            
            display.style.display = 'block';
        }

        // Social situations functionality
        const socialSituations = {
            sharing: {
                emoji: '🧸',
                title: 'שיתוף צעצועים',
                description: 'יותם משחק עם הרכבת שאני רוצה לשחק איתה. הוא משחק כבר הרבה זמן ואני ממש רוצה תור.',
                options: [
                    {
                        text: 'אומר "תן לי את זה עכשיו!"',
                        type: 'aggressive',
                        feedback: 'זה לא יעבוד טוב. יותם ירגיש רע ולא ירצה לשתף.'
                    },
                    {
                        text: 'מחכה בשקט ולא אומר כלום',
                        type: 'passive',
                        feedback: 'אפשר לחכות, אבל טוב גם להביע את הרצון שלנו.'
                    },
                    {
                        text: 'אומר "יותם, אפשר שנשחק יחד?"',
                        type: 'good',
                        feedback: 'מעולה! שיתוף זה כיף יותר ויותם יהיה מאושר לשחק יחד.'
                    },
                    {
                        text: 'אומר "יותם, כשתסיים, אפשר תור?"',
                        type: 'good',
                        feedback: 'נהדר! אתה מכבד את המשחק שלו ומבקש יפה.'
                    }
                ],
                lesson: 'שיתוף הוא כיף! כשאנחנו מבקשים יפה או מציעים לשחק יחד, כולם נהנים יותר.'
            },
            joining: {
                emoji: '👥',
                title: 'הצטרפות לקבוצה',
                description: 'רואה קבוצת ילדים משחקים במשחק שנראה מהנה. אני רוצה להצטרף אבל לא יודע איך.',
                options: [
                    {
                        text: 'נכנס בכוח למשחק בלי לשאול',
                        type: 'aggressive',
                        feedback: 'זה יפריע למשחק ויכעיס את הילדים.'
                    },
                    {
                        text: 'עומד מהצד ומסתכל בלי לעשות כלום',
                        type: 'passive',
                        feedback: 'הילדים לא יודעים שאתה רוצה להצטרף.'
                    },
                    {
                        text: 'שואל "אפשר להצטרף אליכם?"',
                        type: 'good',
                        feedback: 'מעולה! ברוב המקרים ילדים יהיו שמחים שתצטרף.'
                    },
                    {
                        text: 'אומר "איזה משחק כיף! איך משחקים?"',
                        type: 'good',
                        feedback: 'נהדר! אתה מראה עניין ומזמין את עצמך בצורה נחמדה.'
                    }
                ],
                lesson: 'להצטרף לקבוצה זה קל כשאנחנו שואלים יפה ומראים שאנחנו רוצים להיות חלק מהכיף!'
            },
            excluded: {
                emoji: '😔',
                title: 'הרגשה מחוץ לקבוצה',
                description: 'החברים אמרו שהם לא רוצים שאשחק איתם היום. אני מרגיש עצוב ובודד.',
                options: [
                    {
                        text: 'צועק עליהם ואומר דברים רעים',
                        type: 'aggressive',
                        feedback: 'זה יגרום להם להתרחק עוד יותר ולא יפתור את הבעיה.'
                    },
                    {
                        text: 'הולך לבכות בפינה',
                        type: 'passive',
                        feedback: 'זה בסדר להרגיש עצוב, אבל יש דרכים טובות יותר להתמודד.'
                    },
                    {
                        text: 'מוצא ילדים אחרים לשחק איתם',
                        type: 'good',
                        feedback: 'בחירה חכמה! יש הרבה ילדים נחמדים לשחק איתם.'
                    },
                    {
                        text: 'הולך למורה ומספר איך אני מרגיש',
                        type: 'good',
                        feedback: 'נכון! המורה יכולה לעזור ולתמוך בזמנים קשים.'
                    }
                ],
                lesson: 'לפעמים לא כולם רוצים לשחק, וזה בסדר. יש תמיד דרכים אחרות להנות ולמצוא חברים.'
            },
            conflict: {
                emoji: '😤',
                title: 'ויכוח עם חבר',
                description: 'רבתי עם החבר הכי טוב שלי על איזה משחק לשחק. עכשיו שנינו כועסים ולא מדברים.',
                options: [
                    {
                        text: 'אומר שהוא טיפש ולא אדבר איתו יותר',
                        type: 'aggressive',
                        feedback: 'זה רק יגרום לריב גדול יותר ותאבד חבר טוב.'
                    },
                    {
                        text: 'מתעלם ממנו ומתחיל לשחק לבד',
                        type: 'passive',
                        feedback: 'החברות שלכם חשובה מדי כדי לוותר עליה ככה.'
                    },
                    {
                        text: 'אומר "סליחה שצעקתי, בואו נמצא פתרון"',
                        type: 'good',
                        feedback: 'מעולה! חברים אמיתיים יודעים לבקש סליחה ולפתור ביחד.'
                    },
                    {
                        text: 'מציע "בואו נשחק במשהו שטוב לשנינו"',
                        type: 'good',
                        feedback: 'נהדר! פשרה היא דרך נהדרת לשמור על חברות.'
                    }
                ],
                lesson: 'ריבים קורים בין חברים, אבל חברות אמיתית חזקה יותר מכל ויכוח!'
            },
            helping: {
                emoji: '🤲',
                title: 'עזרה לחבר',
                description: 'רואה ילדה שיושבת לבד ונראית עצובה. נראה שאף אחד לא משחק איתה.',
                options: [
                    {
                        text: 'מתעלם ממנה - זה לא העניין שלי',
                        type: 'passive',
                        feedback: 'אנחנו יכולים לעשות הבדל בחיים של מישהו אחר.'
                    },
                    {
                        text: 'אומר לכולם שהיא מוזרה',
                        type: 'aggressive',
                        feedback: 'זה יגרום לה להרגיש עוד יותר רע ולא נחמד.'
                    },
                    {
                        text: 'ניגש אליה ושואל "איך אתה מרגישה?"',
                        type: 'good',
                        feedback: 'נהדר! לפעמים זה מה שאנשים הכי צריכים - מישהו שיקשיב.'
                    },
                    {
                        text: 'מזמין אותה לשחק איתי',
                        type: 'good',
                        feedback: 'מעולה! אתה יכול להיות החבר שהיא צריכה.'
                    }
                ],
                lesson: 'לעזור לאחרים זה אחד הדברים הכי יפים שאפשר לעשות. זה מרגיש טוב לכולם!'
            },
            teasing: {
                emoji: '😢',
                title: 'התגרות או לעג',
                description: 'ילד צוחק על הנעליים החדשות שלי ואומר שהן מוזרות. ילדים אחרים מתחילים לצחוק גם.',
                options: [
                    {
                        text: 'מתחיל לצעוק ולדחוף אותו',
                        type: 'aggressive',
                        feedback: 'זה יגרום למצב להסלים ותיכנס לצרות.'
                    },
                    {
                        text: 'מתחיל לבכות ובורח',
                        type: 'passive',
                        feedback: 'זה מובן שתרגיש רע, אבל יש דרכים טובות יותר להגיב.'
                    },
                    {
                        text: 'אומר בביטחון "לי הן מאוד מוצאות חן"',
                        type: 'good',
                        feedback: 'מעולה! ביטחון עצמי זה הכוח הכי גדול נגד לעג.'
                    },
                    {
                        text: 'הולך למורה ומספר מה קרה',
                        type: 'good',
                        feedback: 'נכון! המורה צריכה לדעת כשמישהו לא מתנהג יפה.'
                    }
                ],
                lesson: 'אף אחד לא זכאי לגרום לנו להרגיש רע. אנחנו מיוחדים בדיוק כמו שאנחנו!'
            }
        };

        function showSocialSituation(situationKey) {
            const situation = socialSituations[situationKey];
            const detailDiv = document.getElementById('socialSituationDetail');
            const optionsDiv = document.getElementById('situationOptions');
            
            // Update content
            document.getElementById('situationEmoji').textContent = situation.emoji;
            document.getElementById('situationTitle').textContent = situation.title;
            document.getElementById('situationDescription').textContent = situation.description;
            
            // Clear and create options
            optionsDiv.innerHTML = '';
            situation.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.style.cssText = `
                    background: white;
                    padding: 15px;
                    border-radius: 10px;
                    border: 2px solid #ddd;
                    cursor: pointer;
                    transition: all 0.3s ease;
                `;
                optionDiv.innerHTML = `<strong>${index + 1}.</strong> ${option.text}`;
                optionDiv.onclick = () => showSocialFeedback(situationKey, index);
                optionsDiv.appendChild(optionDiv);
            });
            
            // Show detail section
            detailDiv.style.display = 'block';
            detailDiv.scrollIntoView({ behavior: 'smooth' });
            
            // Hide feedback initially
            document.getElementById('socialFeedback').style.display = 'none';
        }

        function showSocialFeedback(situationKey, optionIndex) {
            const situation = socialSituations[situationKey];
            const option = situation.options[optionIndex];
            const feedbackDiv = document.getElementById('socialFeedback');
            const feedbackContent = document.getElementById('feedbackContent');
            
            // Color code the selected option
            const optionsDiv = document.getElementById('situationOptions');
            const optionDivs = optionsDiv.children;
            
            Array.from(optionDivs).forEach((div, index) => {
                if (index === optionIndex) {
                    if (option.type === 'good') {
                        div.style.background = 'linear-gradient(45deg, #4CAF50, #45a049)';
                        div.style.color = 'white';
                        div.style.borderColor = '#4CAF50';
                    } else if (option.type === 'aggressive') {
                        div.style.background = 'linear-gradient(45deg, #ff4757, #ff3742)';
                        div.style.color = 'white';
                        div.style.borderColor = '#ff4757';
                    } else {
                        div.style.background = 'linear-gradient(45deg, #ffa726, #ff9800)';
                        div.style.color = 'white';
                        div.style.borderColor = '#ffa726';
                    }
                } else {
                    div.style.background = '#f5f5f5';
                    div.style.color = '#666';
                    div.style.borderColor = '#ddd';
                }
                div.style.pointerEvents = 'none';
            });
            
            // Show feedback
            let feedbackHTML = `
                <div style="padding: 20px; border-radius: 10px; margin-bottom: 15px; ${
                    option.type === 'good' ? 'background: #e8f5e8; border-right: 5px solid #4CAF50;' :
                    option.type === 'aggressive' ? 'background: #ffebee; border-right: 5px solid #ff4757;' :
                    'background: #fff3e0; border-right: 5px solid #ffa726;'
                }">
                    <p style="margin: 0; font-size: 1.1rem;">${option.feedback}</p>
                </div>
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px;">
                    <p style="margin: 0; font-size: 1.1rem; font-weight: 500;">${situation.lesson}</p>
                </div>
            `;
            
            feedbackContent.innerHTML = feedbackHTML;
            feedbackDiv.style.background = option.type === 'good' ? '#e8f5e8' : 
                                         option.type === 'aggressive' ? '#ffebee' : '#fff3e0';
            feedbackDiv.style.display = 'block';
        }

        function hideSocialSituation() {
            document.getElementById('socialSituationDetail').style.display = 'none';
        }

        // Superpower quiz functionality
        let quizAnswers = {};
        let currentQuestion = 1;

        const superpowers = {
            creative: {
                emoji: '🎨',
                title: 'יוצר/ת הקסמים',
                description: 'יש לך דמיון מדהים ויכולת להמציא דברים חדשים ומיוחדים! אתה יודע לראות את העולם בצורה שונה ומעניינת.',
                schoolBenefit: 'בכיתה תוכל לעזור בפרויקטים יצירתיים, להציע רעיונות מקוריים ולהפוך את הלמידה למעניינת ומהנה לכולם.'
            },
            helper: {
                emoji: '🤗',
                title: 'גיבור/ת הלב',
                description: 'יש לך לב זהב ואכפת לך מאחרים! אתה תמיד מוכן לעזור ולדאוג שכולם ירגישו טוב.',
                schoolBenefit: 'בכיתה תהיה החבר שכולם אוהבים - תעזור לילדים חדשים להשתלב, תנחם מי שעצוב ותוודא שאף אחד לא נשאר לבד.'
            },
            leader: {
                emoji: '👑',
                title: 'מנהיג/ה טבעי',
                description: 'יש לך כוח להוביל ולארגן! אתה יודע איך לקחת אחריות ולעזור לקבוצה להצליח.',
                schoolBenefit: 'בכיתה תוכל לעזור למורה לארגן פעילויות, להוביל קבוצות עבודה ולוודא שכולם עובדים יחד בהרמוניה.'
            },
            peaceful: {
                emoji: '🕊️',
                title: 'שומר/ת השלום',
                description: 'יש לך כוח מיוחד לפתור קונפליקטים ולהביא שקט! אתה יודע איך לעזור לאנשים להבין אחד את השני.',
                schoolBenefit: 'בכיתה תהיה השופט הוגן - תעזור לפתור ויכוחים, לנחם מי שכועס ולשמור על אווירה טובה לכולם.'
            },
            cheerful: {
                emoji: '🌟',
                title: 'מקרין/ת השמחה',
                description: 'יש לך כוח להאיר את היום של כולם! אתה יודע איך לגרום לאנשים לחייך ולהרגיש טוב.',
                schoolBenefit: 'בכיתה תהיה מקור האנרגיה החיובית - תעזור לכולם להנות מהלמידה, תרים מצב רוח בימים קשים ותגרום לכיתה להיות מקום כיף.'
            }
        };

        function selectQuizAnswer(questionNum, answerType, element) {
            // Store the answer
            quizAnswers[questionNum] = answerType;
            
            // Visual feedback
            const options = element.parentElement.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.style.borderColor = 'transparent';
                opt.style.background = 'white';
            });
            
            element.style.borderColor = '#667eea';
            element.style.background = 'linear-gradient(45deg, #667eea, #764ba2)';
            element.style.color = 'white';
            
            // Move to next question after delay
            setTimeout(() => {
                if (questionNum < 3) {
                    document.getElementById(`question${questionNum}`).style.display = 'none';
                    document.getElementById(`question${questionNum + 1}`).style.display = 'block';
                    currentQuestion++;
                } else {
                    // Calculate result
                    showSuperpowerResult();
                }
            }, 1000);
        }

        function showSuperpowerResult() {
            // Count answers
            const counts = {};
            Object.values(quizAnswers).forEach(answer => {
                counts[answer] = (counts[answer] || 0) + 1;
            });
            
            // Find the most common answer
            let maxCount = 0;
            let result = 'helper'; // default
            
            Object.keys(counts).forEach(type => {
                if (counts[type] > maxCount) {
                    maxCount = counts[type];
                    result = type;
                }
            });
            
            // Show result
            const resultDiv = document.getElementById('superpowerResult');
            const quizDiv = document.getElementById('superpowerQuiz');
            const superpower = superpowers[result];
            
            document.getElementById('superpowerEmoji').textContent = superpower.emoji;
            document.getElementById('superpowerTitle').textContent = superpower.title;
            document.getElementById('superpowerDescription').textContent = superpower.description;
            document.getElementById('superpowerSchoolBenefit').textContent = superpower.schoolBenefit;
            
            quizDiv.style.display = 'none';
            resultDiv.style.display = 'block';
            
            // Scroll to result
            setTimeout(() => {
                resultDiv.scrollIntoView({ behavior: 'smooth' });
            }, 200);
        }

        function resetSuperpowerQuiz() {
            quizAnswers = {};
            currentQuestion = 1;
            
            // Reset all questions
            for (let i = 1; i <= 3; i++) {
                const question = document.getElementById(`question${i}`);
                question.style.display = i === 1 ? 'block' : 'none';
                
                // Reset options
                const options = question.querySelectorAll('.quiz-option');
                options.forEach(opt => {
                    opt.style.borderColor = 'transparent';
                    opt.style.background = 'white';
                    opt.style.color = '#333';
                });
            }
            
            // Hide result and show quiz
            document.getElementById('superpowerResult').style.display = 'none';
            document.getElementById('superpowerQuiz').style.display = 'block';
        }

        // Setup drag and drop
        function setupDragAndDrop() {
            document.addEventListener('dragstart', function(e) {
                if (e.target.classList.contains('draggable-item')) {
                    e.dataTransfer.setData('text/plain', e.target.outerHTML);
                    e.dataTransfer.setData('application/x-element-id', Math.random().toString());
                    e.target.style.opacity = '0.5';
                }
            });

            document.addEventListener('dragend', function(e) {
                if (e.target.classList.contains('draggable-item')) {
                    e.target.style.opacity = '1';
                }
            });

            document.addEventListener('dragover', function(e) {
                if (e.target.classList.contains('drop-zone') || e.target.closest('.drop-zone')) {
                    e.preventDefault();
                    const dropZone = e.target.closest('.drop-zone') || e.target;
                    dropZone.classList.add('drag-over');
                }
            });

            document.addEventListener('dragleave', function(e) {
                if (e.target.classList.contains('drop-zone')) {
                    e.target.classList.remove('drag-over');
                }
            });

            document.addEventListener('drop', function(e) {
                if (e.target.classList.contains('drop-zone') || e.target.closest('.drop-zone')) {
                    e.preventDefault();
                    const dropZone = e.target.closest('.drop-zone') || e.target;
                    dropZone.classList.remove('drag-over');
                    
                    const draggedHTML = e.dataTransfer.getData('text/plain');
                    
                    // Create new element from HTML
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = draggedHTML;
                    const newElement = tempDiv.firstChild;
                    
                    // Remove the original element
                    const draggedElements = document.querySelectorAll('.draggable-item');
                    draggedElements.forEach(el => {
                        if (el.outerHTML === draggedHTML && el.style.opacity === '0.5') {
                            el.remove();
                        }
                    });
                    
                    // Add to drop zone
                    dropZone.appendChild(newElement);
                }
            });
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            setupDragAndDrop();
            
            // Enter key support for inputs
            document.getElementById('strengthInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') addStrength();
            });
            
            document.getElementById('challengeInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') addChallenge();
            });
            
            document.getElementById('helpInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') addHelp();
            });
            
            document.getElementById('customPhraseInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') addCustomPhrase();
            });
        });
    </script>
</body>
</html>